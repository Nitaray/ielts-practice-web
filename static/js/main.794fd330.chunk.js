(this["webpackJsonpielts-practice-app"]=this["webpackJsonpielts-practice-app"]||[]).push([[0],{238:function(t,e,n){},272:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),s=n(22),c=n.n(s),i=(n(238),n(10)),o=n(16),l=n(40),j=n(26),u=n(55),d=n.n(u),b=n(78),O=n(70),x=n(325),m=n(351),p=n(90),h=n.n(p),g=n(326),f=n(211),v=n(24),y=n.n(v),w=n(309),C=n(311),I=n(210),T=n(1);function S(t){var e=t.value,n=t.onClick,a=function(){return n()};return Object(T.jsx)(w.a,{fullWidth:!0,disableElevation:!0,variant:"contained",color:"primary",onClick:function(){return a()},children:e})}function k(t){var e=t.disabled,n=t.icon,a=t.onClick,r=function(){return a()};return Object(T.jsx)(C.a,{disabled:e,color:"primary",onClick:function(){return r()},children:n})}function q(t){var e=t.options,n=t.icon,a=r.a.useState(null),s=Object(i.a)(a,2),c=s[0],o=s[1];return Object(T.jsxs)(f.a,{elevation:0,children:[Object(T.jsx)(C.a,{color:"inherit","aria-haspopup":"true",onClick:function(t){return o(t.currentTarget)},children:n}),Object(T.jsx)(f.a,{elevation:0,style:{margin:"0px",border:"1px solid black"}}),Object(T.jsx)(I.a,{keepMounted:!0,elevation:2,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},anchorEl:c,open:Boolean(c),onClose:function(){return o(null)},children:e.map((function(t){return t}))})]})}var N=n(346),W=n(317);n(347);function z(t){var e=t.size,n=t.label,a=t.name,r=t.value,s=t.onChange,c=function(t){return s(t)};return Object(T.jsx)(N.a,{required:!0,fullWidth:!0,autoFocus:!0,variant:"outlined",margin:"normal",size:e,id:a,label:n,name:a,value:r,onChange:function(t){return c(t)}})}function A(t){var e=t.label,n=t.name,a=t.value,r=t.onChange,s=function(t){return r(t)};return Object(T.jsx)(N.a,{required:!0,fullWidth:!0,autoFocus:!0,variant:"outlined",margin:"normal",type:"password",id:n,label:e,name:n,value:a,onChange:function(t){return s(t)}})}var B=n(82),F=n(318);function P(t){var e=t.value,n=t.fontSize;return Object(T.jsx)(B.a,{noWrap:!0,color:"inherit",variant:"inherit",style:{fontWeight:"bold",fontSize:n},children:e})}function $(t){var e=t.value,n=t.align;return Object(T.jsx)(B.a,{align:n,children:e})}function L(t){var e=t.value,n=t.to;return Object(T.jsx)(F.a,{component:l.b,to:n,underline:"none",children:Object(T.jsx)(B.a,{variant:"body2",children:e})})}var M,R,E,G,D,Q,U,_,H,J,Y,K,X,V=n(17),Z=n(28),tt=n(25),et=Object(tt.a)(M||(M=Object(Z.a)(["\n     mutation Login($username: String!, $password: String!) {\n        login(username: $username, password: $password) {\n            token\n            user {\n                id\n                username\n                role {\n                    name\n                }\n            }\n        }\n     }   \n     "]))),nt=Object(tt.a)(R||(R=Object(Z.a)(["\n     mutation signup($user: UserInput!) {\n          signup(user: $user) {\n               token\n          }\n     }\n     "]))),at=Object(tt.a)(E||(E=Object(Z.a)(["\n\tmutation logout {\n\t\tlogout\n\t}\n"]))),rt=Object(tt.a)(G||(G=Object(Z.a)(["\n     mutation refreshJWT {\n          refreshJWT {\n               token\n               user {\n                    id\n                    username\n                    role {\n                         name\n                    }\n               }\n          }\n     }\n     "]))),st=Object(tt.a)(D||(D=Object(Z.a)(["\n    mutation createComment($comment: CommentInput!) {\n        createComment(comment: $comment) {\n            id\n        }\n    }\n"]))),ct=Object(tt.a)(Q||(Q=Object(Z.a)(["\n    mutation deleteComment($commentId: Int!) {\n        deleteComment(commentId: $commentId) {\n            id\n        }\n    }\n"]))),it=Object(tt.a)(U||(U=Object(Z.a)(["\n    mutation addTest($test: TestInput!) {\n        addTest(test: $test) {\n            id\n            title\n            type\n        }\n    }\n    "]))),ot=Object(tt.a)(_||(_=Object(Z.a)(["\n    mutation addTestSection($section: TestSectionInput!) {\n        addTestSection(section: $section) {\n            id\n        }\n    }\n"]))),lt=Object(tt.a)(H||(H=Object(Z.a)(["\n    mutation addQuestionGroup($group: QuestionGroupInput!) {\n        addQuestionGroup(group: $group) {\n            id\n        }\n    }\n"]))),jt=Object(tt.a)(J||(J=Object(Z.a)(["\n    mutation addQuestion($question: QuestionInput!) {\n        addQuestion(question: $question) {\n            id\n        }\n    }\n"]))),ut=Object(tt.a)(Y||(Y=Object(Z.a)(["\n    mutation addAnswer($answer: AnswerInput!) {\n        addAnswer(answer: $answer) {\n            id\n        }\n    }\n"]))),dt=Object(tt.a)(K||(K=Object(Z.a)(["\n\tmutation submitTest($testSubmission: TestSubmission!) {\n\t\tsubmitTest(testSubmission: $testSubmission) {\n\t\t\ttest {\n\t\t\t\tid\n\t\t\t\ttitle\n\t\t\t\ttype\n\t\t\t\tcomments {\n\t\t\t\t\tid\n\t\t\t\t\tuser {\n\t\t\t\t\t\tid\n\t\t\t\t\t\tusername\n\t\t\t\t\t}\n\t\t\t\t\tcontent\n\t\t\t\t\tcreated\n\t\t\t\t}\n\t\t\t}\n\t\t\tscore\n\t\t\tanswerHistory {\n\t\t\t\tquestion {\n\t\t\t\t\ttype\n\t\t\t\t\tstatementText\n\t\t\t\t}\n\t\t\t\tanswer {\n\t\t\t\t\ttext\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]))),bt=Object(tt.a)(X||(X=Object(Z.a)(["\n\tmutation startTest($testId: Int!, $userId: Int!) {\n\t\tstartTest(testId: $testId, userId: $userId) {\n\t\t\tid\n\t\t\ttitle\n\t\t\ttype\n\t\t}\n\t}\n"]))),Ot=n(350),xt=n(321),mt=n(319),pt=n(320),ht=n(322);function gt(t){var e=t.error,n=t.open,a=t.onClose,r=function(){return a()};return Object(T.jsx)("div",{children:Object(T.jsxs)(Ot.a,{open:n,onClose:r,children:[Object(T.jsx)(mt.a,{children:Object(T.jsx)(pt.a,{children:e})}),Object(T.jsx)(xt.a,{children:Object(T.jsx)(w.a,{onClick:r,color:"primary",autoFocus:!0,children:"Close"})})]})})}function ft(t){var e=t.open;return Object(T.jsx)(Ot.a,{open:e,PaperProps:{style:{backgroundColor:"transparent",boxShadow:"none"}},children:Object(T.jsx)(mt.a,{children:Object(T.jsx)(ht.a,{size:50})})})}var vt=r.a.createContext(),yt=y()((function(t){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===t.palette.type?t.palette.grey[50]:t.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:t.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:t.spacing(1),backgroundColor:t.palette.secondary.main},form:{width:"100%",marginTop:t.spacing(1)}}}));function wt(){var t=yt(),e=Object(j.g)(),n=Object(a.useState)({username:"",password:""}),s=Object(i.a)(n,2),c=s[0],l=s[1],u=Object(a.useState)(null),p=Object(i.a)(u,2),v=p[0],y=p[1],w=Object(V.useMutation)(et),C=Object(i.a)(w,2),I=C[0],k=C[1].loading,q=Object(a.useContext)(vt),N=Object(i.a)(q,2),W=(N[0],N[1]),B=function(t){return function(e){e.preventDefault(),l(Object(o.a)(Object(o.a)({},c),{},Object(O.a)({},t,e.target.value)))}},F=function(){var t=Object(b.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:I({variables:{username:c.username,password:c.password},errorPolicy:"none"}).then((function(t){W({status:!0,token:t.data.login.token,user:{id:t.data.login.user.id,username:t.data.login.user.username,role:{name:t.data.login.user.role.name}}}),e.push("/tests/")})).catch((function(t){y(!0)}));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(T.jsxs)(r.a.Fragment,{children:[k&&Object(T.jsx)(ft,{open:k}),v&&Object(T.jsx)(gt,{error:"Invalid username/password. Please try again!",open:v,onClose:y(!1)}),Object(T.jsxs)(x.a,{container:!0,component:"main",className:t.root,children:[Object(T.jsx)(g.a,{}),Object(T.jsx)(x.a,{item:!0,xs:!1,sm:4,md:8}),Object(T.jsx)(x.a,{item:!0,xs:12,sm:8,md:4,component:f.a,children:Object(T.jsxs)("div",{className:t.paper,children:[Object(T.jsx)(m.a,{className:t.avatar,children:Object(T.jsx)(h.a,{})}),Object(T.jsx)(P,{value:"Sign In",fontSize:"18px"}),Object(T.jsxs)("form",{className:t.form,children:[Object(T.jsx)(z,{label:"Username",name:"username",value:c.username,onChange:B("username")}),Object(T.jsx)(A,{label:"Password",name:"password",value:c.password,onChange:B("password")}),Object(T.jsx)(S,{value:"Sign In",onClick:function(){return F()}}),Object(T.jsxs)(x.a,{container:!0,direction:"row",justify:"flex-end",children:[Object(T.jsx)(x.a,{item:!0,xs:!0,children:Object(T.jsx)(L,{value:"Forgot password!",align:"left",to:"/forgot-password"})}),Object(T.jsx)(x.a,{item:!0,xs:!0,children:Object(T.jsx)(L,{value:"Don't have account?",align:"right",to:"/create-account"})})]})]})]})})]})]})}var Ct=n(327),It=y()((function(t){return{paper:{marginTop:t.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:t.spacing(1),backgroundColor:t.palette.secondary.main},form:{width:"100%",marginTop:t.spacing(3)}}}));function Tt(){var t=It(),e=Object(j.g)(),n=Object(a.useState)({name:"",username:"",password:"",confirmPassword:""}),s=Object(i.a)(n,2),c=s[0],l=s[1],u=Object(a.useState)(null),d=Object(i.a)(u,2),b=d[0],p=d[1],f=Object(V.useMutation)(nt),v=Object(i.a)(f,2),y=v[0],w=v[1].loading,C=function(t){return function(e){return l(Object(o.a)(Object(o.a)({},c),{},Object(O.a)({},t,e.target.value)))}};return Object(T.jsxs)(r.a.Fragment,{children:[w&&Object(T.jsx)(ft,{open:w}),b&&Object(T.jsx)(gt,{error:"Please try again!",open:b,onClose:p(!1)}),Object(T.jsxs)(Ct.a,{maxWidth:"xs",children:[Object(T.jsx)(g.a,{}),Object(T.jsxs)("div",{className:t.paper,children:[Object(T.jsx)(m.a,{className:t.avatar,children:Object(T.jsx)(h.a,{})}),Object(T.jsx)(P,{value:"Create Account",fontSize:"18px"}),Object(T.jsxs)("form",{className:t.form,children:[Object(T.jsxs)(x.a,{container:!0,children:[Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(z,{label:"Full Name",name:"name",value:c.name,onChange:C("name")})}),Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(z,{label:"Username",name:"username",value:c.username,onChange:C("username")})}),Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(A,{label:"Password",name:"password",value:c.password,onChange:C("password")})}),Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(A,{label:"Confirm password",name:"confirm-password",value:c.confirmPassword,onChange:C("confirmPassword")})}),Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(S,{value:"Sign Up",onClick:function(){y({variables:{user:{username:c.username,password:c.password,name:c.name}},errorPolicy:"none"}).then((function(t){return e.push("/")})).catch((function(t){p(!0),console.log(t)}))}})})]}),Object(T.jsx)(x.a,{container:!0,children:Object(T.jsx)(x.a,{item:!0,xs:!0,children:Object(T.jsx)(L,{value:"Oh! I already have account",align:"right",to:"/"})})})]})]})]})]})}var St=y()((function(t){return{paper:{marginTop:t.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:t.spacing(1),backgroundColor:t.palette.secondary.main},form:{width:"100%",marginTop:t.spacing(3)}}}));function kt(){var t,e=St(),n=Object(a.useState)({email:""}),s=Object(i.a)(n,2),c=s[0],l=s[1];return Object(T.jsx)(r.a.Fragment,{children:Object(T.jsxs)(Ct.a,{maxWidth:"xs",children:[Object(T.jsx)(g.a,{}),Object(T.jsxs)("div",{className:e.paper,children:[Object(T.jsx)(m.a,{className:e.avatar,children:Object(T.jsx)(h.a,{})}),Object(T.jsx)(P,{value:"Recover password",fontSize:"18px"}),Object(T.jsxs)("form",{className:e.form,children:[Object(T.jsxs)(x.a,{container:!0,children:[Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(z,{label:"Email",name:"email",value:c.email,onChange:(t="email",function(e){return l(Object(o.a)(Object(o.a)({},c),{},Object(O.a)({},t,e.target.value)))})})}),Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(S,{value:"Recover password",onClick:function(){}})})]}),Object(T.jsx)(x.a,{container:!0,children:Object(T.jsx)(x.a,{item:!0,xs:!0,children:Object(T.jsx)(L,{value:"Back to home",align:"right",to:"/"})})})]})]})]})})}var qt=n(329),Nt=n(328),Wt=n(199),zt=n.n(Wt),At=y()((function(t){return{toolBar:{backgroundColor:t.palette.common.white,color:t.palette.common.black,justifyContent:"space-between",overflowX:"auto"},appBar:{marginBottom:t.spacing(0)}}}));function Bt(t){var e=At();return Object(T.jsx)(Nt.a,{elevation:2,className:e.appBar,children:Object(T.jsxs)(qt.a,{component:"nav",variant:"dense",className:e.toolBar,children:[Object(T.jsx)(P,{value:"IELTS Training",component:"h1"}),Object(T.jsx)(q,{options:t.options,icon:Object(T.jsx)(zt.a,{})})]})})}var Ft=n(330),Pt=n(335),$t=n(336),Lt=n(333),Mt=n(334),Rt=n(331),Et=n(349),Gt=n(332),Dt=n(354),Qt=n(355),Ut=n(353),_t=n(100),Ht=n.n(_t),Jt=y()((function(t){return{chip:{maxHeight:"18px",fontSize:"11px",fontWeight:"bold"}}}));function Yt(){var t=Jt(),e=Ht()();return Object(T.jsx)(Ut.a,{size:"small",label:"Listening",className:t.chip,style:{backgroundColor:e.palette.chip.listening}})}function Kt(){var t=Jt(),e=Ht()();return Object(T.jsx)(Ut.a,{size:"small",label:"Reading",className:t.chip,style:{backgroundColor:e.palette.chip.reading}})}var Xt=n(135),Vt=n.n(Xt),Zt=n(81),te=n.n(Zt);function ee(t,e,n){return e[n]<t[n]?-1:e[n]>t[n]?1:0}function ne(t,e){return"desc"===t?function(t,n){return ee(t,n,e)}:function(t,n){return-ee(t,n,e)}}function ae(t,e){var n=t.map((function(t,e){return[t,e]}));return n.sort((function(t,n){var a=e(t[0],n[0]);return 0!==a?a:t[1]-n[1]})),n.map((function(t){return t[0]}))}var re,se,ce,ie,oe,le=Object(Ft.a)((function(t){return{root:{width:"100%"},paper:{width:"100%",marginBottom:t.spacing(2)},table:{width:"inherit"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},toolbar:{paddingLeft:t.spacing(2),paddingRight:t.spacing(1),justifyContent:"space-between",overflowX:"auto"},toolbarTitle:{flex:"1 1"}}})),je=[{id:"id",numeric:!0,label:"#"},{id:"title",numeric:!1,label:"Title"},{id:"type",numeric:!1,label:"Type"},{id:"status",numeric:!1,label:"Status"}];function ue(t){var e=t.order,n=t.orderBy,a=t.onRequestSort;return Object(T.jsx)(Rt.a,{children:Object(T.jsx)(Gt.a,{children:je.map((function(t){return Object(T.jsx)(Lt.a,{align:t.numeric?"right":"left",sortDirection:n===t.id&&e,children:Object(T.jsx)(Dt.a,{active:n===t.id,direction:n===t.id?e:"asc",onClick:function(e){return a(e,t.id)},children:Object(T.jsx)(P,{value:t.label})})},t.id)}))})})}function de(){var t=le(),e=Object(j.g)(),n=Object(a.useContext)(vt),r=Object(i.a)(n,1)[0];return Object(T.jsxs)(qt.a,{className:t.toolbar,children:[Object(T.jsx)("div",{children:Object(T.jsx)(Ut.a,{size:"small"})}),Object(T.jsx)("div",{children:"admin"===r.user.role.name.toLowerCase()&&Object(T.jsx)(Qt.a,{title:"Add test",children:Object(T.jsx)(C.a,{onClick:function(){e.push("/add")},children:Object(T.jsx)(te.a,{})})})})]})}function be(t){var e=t.allTests,n=t.doneTests,r=le(),s=Object(a.useState)([]),c=Object(i.a)(s,2),o=c[0],l=c[1],j=Object(a.useState)("asc"),u=Object(i.a)(j,2),d=u[0],b=u[1],O=Object(a.useState)("id"),x=Object(i.a)(O,2),m=x[0],p=x[1],h=Object(a.useState)(0),g=Object(i.a)(h,2),v=g[0],y=g[1],w=Object(a.useState)(10),C=Object(i.a)(w,2),I=C[0],S=C[1],k=I-Math.min(I,e.length-v*I);Object(a.useEffect)((function(){var t=[];e.map((function(e){t.push({id:e.id,title:e.title,type:e.type,status:-1!==n.findIndex((function(t){return t.id===e.id}))})})),l(t)}),[]);return Object(T.jsx)("div",{className:r.root,children:Object(T.jsxs)(f.a,{variant:"outlined",className:r.paper,children:[Object(T.jsx)(de,{}),Object(T.jsx)(Mt.a,{children:Object(T.jsxs)(Pt.a,{size:"small",className:r.table,children:[Object(T.jsx)(ue,{order:d,orderBy:m,onRequestSort:function(t,e){b(m===e&&"asc"===d?"desc":"asc"),p(e)},rowCount:o.length}),Object(T.jsxs)($t.a,{children:[ae(o,ne(d,m)).slice(v*I,v*I+I).map((function(t){return Object(T.jsxs)(Gt.a,{hover:!0,tabIndex:-1,style:{height:45},children:[Object(T.jsx)(Lt.a,{align:"right",children:t.id}),Object(T.jsx)(Lt.a,{align:"left",children:Object(T.jsx)(L,{value:t.title,to:t.status?"/view/".concat(t.id):"/do/".concat(t.id)})}),Object(T.jsx)(Lt.a,{align:"left",children:"listening"===t.type.toLowerCase()?Object(T.jsx)(Yt,{}):Object(T.jsx)(Kt,{})}),Object(T.jsx)(Lt.a,{align:"left",children:t.status&&Object(T.jsx)(Vt.a,{fontSize:"small"})})]},t.id)})),k>0&&Object(T.jsx)(Gt.a,{style:{height:45*k},children:Object(T.jsx)(Lt.a,{colSpan:6})})]})]})}),Object(T.jsx)(Et.a,{rowsPerPageOptions:[10,25,50,100],component:"div",count:o.length,rowsPerPage:I,page:v,onChangePage:function(t,e){return y(e)},onChangeRowsPerPage:function(t){S(parseInt(t.target.value,10)),y(0)}})]})})}var Oe=Object(tt.a)(re||(re=Object(Z.a)(["\n    query allTests {\n        allTests {\n            id\n            title\n            type\n        }\n    }\n"]))),xe=Object(tt.a)(se||(se=Object(Z.a)(["\n\tquery getUserById($id: Int!) {\n\t\tgetUserById(id: $id) {\n\t\t\tdoneTests {\n\t\t\t\tid\n\t\t\t}\n\t\t}\n\t}\n"]))),me=Object(tt.a)(ce||(ce=Object(Z.a)([" \t\n\tquery getTestById($id: Int!) {\n\t\tgetTestById(id: $id) {\n\t\t\tid\n\t\t\ttype\n\t\t\tsections {\n\t\t\t\tid\n \t\t\t\torder\n\t\t\t\ttype\n\t\t\t\tstatementText\n\t\t\t\tstatementAudio\n\t\t\t\tquestionGroups {\n\t\t\t\t\tid\n\t\t\t\t\torder\n\t\t\t\t\tintroText\n\t\t\t\t\tquestions {\n\t\t\t\t\t\tid\n\t\t\t\t\t\torder\n\t\t\t\t\t\ttype\n\t\t\t\t\t\tstatementText\n\t\t\t\t\t\tanswers {\n\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\ttext\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]))),pe=Object(tt.a)(ie||(ie=Object(Z.a)(["\n\tquery getTestResult($userId: Int!, $testId: Int!) {\n     \tgetTestResult(userId: $userId, testId: $testId) {\n     \t\ttest {\n     \t\t\tid\n\t\t\t\ttitle\n\t\t\t\ttype\n     \t\t}\n     \t\tscore\n\t\t\tanswerHistory {\n\t\t\t\tquestion {\n                    statementText\n\t\t\t\t\ttrueAnswer {\n\t\t\t\t\t\ttext\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tanswer {\n\t\t\t\t\ttext\n\t\t\t\t}\n\t\t\t}\n     \t}\n\t}\n"]))),he=Object(tt.a)(oe||(oe=Object(Z.a)(["\n\tquery getTestById($id: Int!) {\n\t\tgetTestById(id: $id) {\n\t\t\tcomments {\n\t\t\t\tid\n\t\t\t\tuser {\n\t\t\t\t\tid\n\t\t\t\t\tusername\n\t\t\t\t}\n\t\t\t\tcontent\n\t\t\t\tcreated\n\t\t\t}\n\t\t}\n\t}\n"]))),ge=y()((function(t){return{container:{paddingTop:t.spacing(4),paddingLeft:t.spacing(8),paddingBottom:t.spacing(4),paddingRight:t.spacing(8)},paper:{padding:t.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"auto"}}}));function fe(){var t=ge(),e=Object(a.useContext)(vt),n=Object(i.a)(e,1)[0],s=Object(V.useQuery)(Oe),c=Object(V.useQuery)(xe,{variables:{id:parseInt(n.user.id,10)}});return s.error&&console.log(s.error),c.data&&console.log(c.data),c.error&&(console.log(n),console.log(c.error)),Object(T.jsxs)(r.a.Fragment,{children:[(s.loading||c.loading)&&Object(T.jsx)(ft,{open:s.loading||c.loading}),Object(T.jsx)(Ct.a,{className:t.container,children:Object(T.jsxs)(x.a,{container:!0,spacing:3,children:[Object(T.jsx)(x.a,{item:!0,xs:12,md:8,children:Object(T.jsx)(f.a,{elevation:0,children:s.data&&c.data&&Object(T.jsx)(be,{allTests:s.data.allTests,doneTests:c.data.getUserById.doneTests})})}),Object(T.jsx)(x.a,{item:!0,xs:0,md:4,children:Object(T.jsx)(f.a,{className:t.paper})})]})})]})}var ve=n(314),ye=n(337),we=n(277),Ce=n(338),Ie=n(340),Te=n(339),Se=n(202),ke=n.n(Se),qe=n(201),Ne=n.n(qe);function We(t){var e=Math.floor((Date.now()-t)/1e3),n=0;return(n=e/31536e3)>1?Math.floor(n)+" years ago":(n=e/2592e3)>1?Math.floor(n)+" months ago":(n=e/86400)>1?Math.floor(n)+" days ago":(n=e/3600)>1?Math.floor(n)+" hours ago":(n=e/60)>1?Math.floor(n)+" minutes ago":Math.floor(e)+" seconds ago"}var ze=Object(Ft.a)((function(t){return{root:{width:"100%"},fonts:{fontWeight:"bold"},listItemSecondaryAction:{visibility:"hidden"},listItem:{"&:hover $listItemSecondaryAction":{visibility:"inherit"}}}}));function Ae(t){var e=ze(),n=Object(a.useContext)(vt),s=Object(i.a)(n,1)[0],c=Object(a.useState)(""),o=Object(i.a)(c,2),l=o[0],j=o[1],u=Object(V.useMutation)(st),d=Object(i.a)(u,2),b=d[0],O=d[1].loading,x=Object(V.useMutation)(ct),p=Object(i.a)(x,1)[0],h=Object(a.useState)(null),g=Object(i.a)(h,2),f=g[0],v=g[1];return Object(T.jsxs)(r.a.Fragment,{children:[O&&Object(T.jsx)(ft,{open:O}),f&&Object(T.jsx)(gt,{error:f,open:f,onClose:function(){return v(null)}}),Object(T.jsxs)(ve.a,{className:e.root,children:[t.comments&&t.comments.map((function(t){return Object(T.jsxs)(r.a.Fragment,{children:[Object(T.jsxs)(we.a,{alignItems:"flex-start",classes:{container:e.listItem},children:[Object(T.jsx)(ye.a,{children:Object(T.jsx)(m.a,{})}),Object(T.jsx)(Ce.a,{primary:Object(T.jsx)(B.a,{style:{fontWeight:"bold",fontSize:"14px"},children:t.user.username}),secondary:Object(T.jsxs)(r.a.Fragment,{children:[Object(T.jsx)(B.a,{variant:"body1",color:"textPrimary",style:{fontSize:"16px"},children:t.content}),Object(T.jsx)(B.a,{variant:"body2",color:"textSecondary",style:{fontSize:"12px"},children:We(+t.created)})]}),style:{maxWidth:"90%"}}),("admin"===s.user.role.name.toLowerCase()||"moderator"===s.user.role.name.toLowerCase()||s.user.id===t.user.id)&&Object(T.jsx)(Te.a,{className:e.listItemSecondaryAction,children:Object(T.jsx)(C.a,{onClick:function(){return e=t.id,void p({variables:{commentId:parseInt(e,10)}}).then((function(t){return console.log(t)})).catch((function(t){return console.log(t)}));var e},children:Object(T.jsx)(Ne.a,{})})})]}),Object(T.jsx)(Ie.a,{})]})})),Object(T.jsxs)(we.a,{alignItems:"flex-start",children:[Object(T.jsx)(Ce.a,{secondary:Object(T.jsx)(r.a.Fragment,{children:Object(T.jsx)(N.a,{multiline:!0,fullWidth:!0,size:"small",variant:"outlined",id:"comment",value:l,placeholder:"Type your comment here...",onChange:function(t){return j(t.target.value)}})}),style:{maxWidth:"95%"}}),Object(T.jsx)(Te.a,{children:Object(T.jsx)(C.a,{onClick:function(){b({variables:{comment:{content:l,testId:parseInt(t.testId,10),userId:parseInt(s.user.id,10)}}}).then((function(t){j("")})).catch((function(t){v("Hey please, don't spam. We don't have the money to buy more storage for our database.")}))},children:Object(T.jsx)(ke.a,{})})})]})]})]})}var Be=n(203),Fe=n.n(Be),Pe=y()((function(t){return{root:{margin:t.spacing(2,24,2,24),padding:t.spacing(2,8,2,8)},toolbar:{justifyContent:"space-between",overflowX:"auto"}}}));function $e(){var t=Object(j.h)().id,e=Object(a.useContext)(vt),n=Object(i.a)(e,1)[0],s=Object(V.useQuery)(pe,{variables:{userId:parseInt(n.user.id,10),testId:parseInt(t,10)}}),c=Object(V.useQuery)(he,{variables:{id:parseInt(t,10)}});return s.error?Object(T.jsx)(j.a,{to:"/do/".concat(t)}):(s.data&&console.log(s.data),Object(T.jsx)(r.a.Fragment,{children:s.loading||c.loading?Object(T.jsx)(ft,{open:s.loading||c.loading}):Object(T.jsxs)(r.a.Fragment,{children:[Object(T.jsx)(Le,Object(o.a)({},s.data.getTestResult)),Object(T.jsx)(Me,Object(o.a)({},c.data.getTestById))]})}))}function Le(t){var e=Pe();return Object(T.jsxs)(f.a,{variant:"outlined",className:e.root,children:[Object(T.jsxs)(qt.a,{className:e.toolbar,children:[Object(T.jsx)("div",{children:Object(T.jsx)(P,{value:t.test.title})}),Object(T.jsx)("div",{children:Object(T.jsx)(P,{value:"Your score: ".concat(t.score)})}),Object(T.jsx)("div",{children:"reading"===t.test.type.toLowerCase()?Object(T.jsx)(Kt,{}):Object(T.jsx)(Yt,{})})]}),Object(T.jsx)(Mt.a,{children:Object(T.jsxs)(Pt.a,{size:"small",children:[Object(T.jsx)(Rt.a,{children:Object(T.jsx)(Gt.a,{children:["Question","Correct Answer","Your Answer","Matched"].map((function(t){return Object(T.jsx)(Lt.a,{align:"left",children:Object(T.jsx)(P,{value:t})})}))})}),Object(T.jsx)($t.a,{children:t.answerHistory.map((function(t){return Object(T.jsxs)(Gt.a,{children:[Object(T.jsx)(Lt.a,{align:"left",children:Object(T.jsx)($,{value:t.question.statementText})}),Object(T.jsx)(Lt.a,{align:"left",children:Object(T.jsx)($,{value:t.question.trueAnswer[0]?t.question.trueAnswer[0].text:""})}),Object(T.jsx)(Lt.a,{align:"left",children:Object(T.jsx)($,{value:t.answer?t.answer.text:""})}),Object(T.jsx)(Lt.a,{align:"left",children:t.answer.text===(t.question.trueAnswer[0]?t.question.trueAnswer[0].text:"")?Object(T.jsx)(Vt.a,{}):Object(T.jsx)(Fe.a,{})})]})}))})]})})]})}function Me(t){var e=Object(j.h)().id,n=Pe(),r=Object(a.useState)([]),s=Object(i.a)(r,2),c=s[0],o=s[1];return Object(a.useEffect)((function(){o(t.comments)})),Object(T.jsx)(f.a,{variant:"outlined",className:n.root,children:Object(T.jsx)(x.a,{container:!0,direction:"row",justify:"space-evenly",spacing:2,children:Object(T.jsx)(x.a,{item:!0,xs:12,children:Object(T.jsx)(Ae,{testId:e,comments:c})})})})}function Re(t){var e=t.children,n=Object(a.useContext)(vt),r=Object(i.a)(n,2),s=r[0],c=r[1],o=Object(a.useState)(!1),l=Object(i.a)(o,2),u=l[0],O=l[1],x=Object(V.useMutation)(rt),m=Object(i.a)(x,2),p=m[0],h=(m[1].loading,function(){var t=Object(b.a)(d.a.mark((function t(){var e;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("refreshJWT"),t.prev=1,t.next=4,p();case 4:return e=t.sent,t.next=7,c({status:!0,token:e.data.refreshJWT.token,user:{id:e.data.refreshJWT.user.id,username:e.data.refreshJWT.user.username,role:{name:e.data.refreshJWT.user.role.name}}});case 7:t.next=14;break;case 9:return t.prev=9,t.t0=t.catch(1),console.log(t.t0),t.next=14,O(!0);case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(){return t.apply(this,arguments)}}());return Object(a.useEffect)((function(){Object(b.a)(d.a.mark((function t(){var e,n,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null==s.token){t.next=9;break}if(e=s.token.split(".")[1],n=new Date(e),a=new Date,!(n.getTime()-a.getTime()<3e5)){t.next=7;break}return t.next=7,h();case 7:t.next=11;break;case 9:return t.next=11,h();case 11:case"end":return t.stop()}}),t)})))()}),[]),u?Object(T.jsx)(j.a,{to:"/"}):e}var Ee=n(341),Ge=n(204),De=n.n(Ge),Qe=n(205),Ue=n.n(Qe),_e=n(356),He=n(101),Je=n.n(He),Ye=y()((function(t){return{form:{width:"100%",marginTop:t.spacing(3)},createTestContainer:{marginTop:t.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},mainContainer:{margin:t.spacing(2,0,8)},testContainer:{padding:t.spacing(4,8,4,8)},testSectionContainer:{marginTop:t.spacing(2),padding:t.spacing(4)},questionGroupContainer:{paddingLeft:t.spacing(2)},questionContainer:{paddingLeft:t.spacing(2)},answerContainer:{paddingLeft:t.spacing(4)},paddingContainer:{paddingLeft:t.spacing(2)}}}));function Ke(){var t=Ye(),e=Object(a.useContext)(vt),n=Object(i.a)(e,1)[0],s=Object(a.useState)(null),c=Object(i.a)(s,2),l=c[0],u=c[1],d=Object(a.useState)(!1),b=Object(i.a)(d,2),O=b[0],m=b[1];return n.token&&"admin"===n.user.role.name.toLowerCase()?Object(T.jsx)(r.a.Fragment,{children:l?O?Object(T.jsxs)(Ct.a,{maxWidth:"xs",className:t.createTestContainer,children:[Object(T.jsx)(P,{value:"Test successfully created",fontSize:"18px"}),Object(T.jsx)(L,{value:"Go back to homepage",to:"/"})]}):Object(T.jsx)(_e.a,{border:0,className:t.mainContainer,children:Object(T.jsxs)(x.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:[Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(Ve,Object(o.a)({},l))}),Object(T.jsx)(x.a,{item:!0,xs:12,sm:6,children:Object(T.jsx)(S,{value:"Finish",onClick:function(){return m(!0)}})})]})}):Object(T.jsx)(Xe,{onClick:function(t,e,n){return function(t,e,n){u({id:t,title:e,type:n})}(t,e,n)}})}):Object(T.jsx)(j.a,{to:"/"})}function Xe(t){var e=Ye(),n=Object(a.useState)({title:"",type:""}),s=Object(i.a)(n,2),c=s[0],l=s[1],j=Object(V.useMutation)(it),u=Object(i.a)(j,2),d=u[0],b=u[1].loading,O=Object(a.useState)(null),m=Object(i.a)(O,2),p=m[0],h=m[1];return Object(T.jsxs)(r.a.Fragment,{children:[b&&Object(T.jsx)(ft,{open:b}),p&&Object(T.jsx)(gt,{error:p,open:p,onClose:function(){return h(null)}}),Object(T.jsxs)(Ct.a,{maxWidth:"xs",className:e.createTestContainer,children:[Object(T.jsx)(P,{value:"Create test",fontSize:"18px"}),Object(T.jsx)("form",{className:e.form,children:Object(T.jsxs)(x.a,{container:!0,spacing:2,children:[Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(N.a,{fullWidth:!0,variant:"outlined",label:"Title",value:c.title,onChange:function(t){return l(Object(o.a)(Object(o.a)({},c),{},{title:t.target.value}))}})}),Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(N.a,{select:!0,fullWidth:!0,variant:"outlined",label:"Type",value:c.type,onChange:function(t){return l(Object(o.a)(Object(o.a)({},c),{},{type:t.target.value}))},children:["Reading","Listening"].map((function(t){return Object(T.jsx)(W.a,{value:t,children:t},t)}))})}),Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(S,{value:"Create Test",onClick:function(){""===c.title.trimStart()||""===c.type.trimStart()?h("Title and type must not be null."):d({variables:{test:{title:c.title.trim(),type:c.type}}}).then((function(e){t.onClick(e.data.addTest.id,e.data.addTest.title,e.data.addTest.type)})).catch((function(t){console.log(t),h("A test with the same title and type already exists!")}))}})})]})})]})]})}function Ve(t){var e=Ye(),n=Object(a.useState)(1),r=Object(i.a)(n,2),s=r[0],c=r[1];return Object(T.jsx)(_e.a,{border:0,className:e.testContainer,children:Object(T.jsxs)(x.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"center",spacing:2,children:[Object(T.jsx)(x.a,{item:!0,xs:12,sm:8,children:Object(T.jsx)(P,{value:"Title: ".concat(t.title),fontSize:"18px"})}),Object(T.jsx)(x.a,{item:!0,xs:3,sm:1,children:Object(T.jsx)(P,{value:"ID: ".concat(t.id),fontSize:"18px"})}),Object(T.jsx)(x.a,{item:!0,xs:3,sm:1,children:"reading"===t.type.toLowerCase()?Object(T.jsx)(Kt,{}):Object(T.jsx)(Yt,{})}),Object(T.jsx)(x.a,{item:!0,xs:6,sm:2,children:Object(T.jsx)(S,{value:Object(T.jsx)(te.a,{}),onClick:function(){c(s+1)}})}),function(){for(var e=[],n=0;n<s;n++)e.push(Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(Ze,Object(o.a)({},t))}));return e}()]})})}function Ze(t){var e=Ye(),n=Object(a.useState)({testId:t.id,type:t.type,text:"",audio:""}),s=Object(i.a)(n,2),c=s[0],l=s[1],j=Object(V.useMutation)(ot),u=Object(i.a)(j,2),d=u[0],b=u[1].loading,O=Object(a.useState)(1),m=Object(i.a)(O,2),p=m[0],h=m[1],g=Object(a.useState)(null),v=Object(i.a)(g,2),y=v[0],w=v[1],C=Object(a.useState)(null),I=Object(i.a)(C,2),S=I[0],q=I[1];return Object(T.jsxs)(r.a.Fragment,{children:[b&&Object(T.jsx)(ft,{open:b}),S&&Object(T.jsx)(gt,{error:S,open:S,onClose:function(){return q(null)}}),Object(T.jsx)(f.a,{variant:"outlined",className:e.testSectionContainer,children:Object(T.jsxs)(x.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:2,children:[Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(N.a,{fullWidth:!0,multiline:!0,disabled:y,size:"small",variant:"outlined",label:"Section statement text",value:c.text,onChange:function(t){return l(Object(o.a)(Object(o.a)({},c),{},{text:t.target.value}))},InputProps:{endAdornment:Object(T.jsx)(Ee.a,{position:"end",children:y?Object(T.jsx)(k,{icon:Object(T.jsx)(te.a,{}),onClick:function(){h(p+1)}}):Object(T.jsx)(k,{icon:Object(T.jsx)(Je.a,{}),onClick:function(){""===c.text.trimStart()&&""===c.audio.trimStart()?q("Text or audio must not be null."):d({variables:{section:{testId:c.testId,type:c.type,text:c.text.trim(),audio:c.audio.trim()}},errorPolicy:"none"}).then((function(t){w({id:t.data.addTestSection.id})})).catch((function(t){console.log(t)}))}})})}})}),y&&function(){for(var t=[],e=0;e<p;e++)t.push(Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(tn,Object(o.a)({},y))}));return t}()]})})]})}function tn(t){var e=Ye(),n=Object(a.useState)({sectionId:t.id,introText:""}),s=Object(i.a)(n,2),c=s[0],l=s[1],j=Object(V.useMutation)(lt),u=Object(i.a)(j,2),d=u[0],b=u[1].loading,O=Object(a.useState)(null),m=Object(i.a)(O,2),p=m[0],h=m[1],g=Object(a.useState)(1),f=Object(i.a)(g,2),v=f[0],y=f[1],w=Object(a.useState)(null),C=Object(i.a)(w,2),I=C[0],S=C[1];return Object(T.jsxs)(r.a.Fragment,{children:[b&&Object(T.jsx)(ft,{open:b}),I&&Object(T.jsx)(gt,{error:I,open:I,onClose:function(){return S(null)}}),Object(T.jsx)(_e.a,{border:0,className:e.questionGroupContainer,children:Object(T.jsxs)(x.a,{container:!0,direction:"row",justify:"flex-end",spacing:2,children:[Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(N.a,{fullWidth:!0,multiline:!0,disabled:p,size:"small",variant:"outlined",label:"Introduction text",value:c.introText,onChange:function(t){return l(Object(o.a)(Object(o.a)({},c),{},{introText:t.target.value}))},InputProps:{endAdornment:Object(T.jsx)(Ee.a,{position:"end",children:p?Object(T.jsx)(k,{icon:Object(T.jsx)(te.a,{}),onClick:function(){y(v+1)}}):Object(T.jsx)(k,{icon:Object(T.jsx)(Je.a,{}),onClick:function(){""===c.introText.trimStart()?S("Intro text for question group must not be null."):d({variables:{group:{sectionId:c.sectionId,introText:c.introText.trim()}},errorPolicy:"none"}).then((function(t){console.log(t),h({id:t.data.addQuestionGroup.id}),console.log(t)})).catch((function(t){return console.log(t)}))}})})}})}),p&&function(){for(var t=[],e=0;e<v;e++)t.push(Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(en,Object(o.a)({},p))}));return t}()]})})]})}function en(t){var e=Ye(),n=Object(a.useState)({questionGroupId:t.id,type:"",statementText:""}),s=Object(i.a)(n,2),c=s[0],l=s[1],j=Object(V.useMutation)(jt),u=Object(i.a)(j,2),d=u[0],b=u[1].loading,O=Object(a.useState)(null),m=Object(i.a)(O,2),p=m[0],h=m[1],g=Object(a.useState)(1),f=Object(i.a)(g,2),v=f[0],y=f[1],w=Object(a.useState)(null),C=Object(i.a)(w,2),I=C[0],S=C[1];return Object(T.jsxs)(r.a.Fragment,{children:[b&&Object(T.jsx)(ft,{open:b}),I&&Object(T.jsx)(gt,{error:I,open:I,onClose:function(){return S(null)}}),Object(T.jsx)(_e.a,{border:0,className:e.questionContainer,children:Object(T.jsxs)(x.a,{container:!0,direction:"row",justify:"space-evenly",spacing:2,children:[Object(T.jsx)(x.a,{item:!0,xs:6,sm:1,children:Object(T.jsx)(N.a,{select:!0,fullWidth:!0,disabled:p,size:"small",variant:"outlined",label:"Type",value:c.type,onChange:function(t){return l(Object(o.a)(Object(o.a)({},c),{},{type:t.target.value}))},children:["FITB","MC","TF"].map((function(t){return Object(T.jsx)(W.a,{value:t,children:t},t)}))})}),Object(T.jsx)(x.a,{item:!0,xs:12,sm:11,children:Object(T.jsx)(N.a,{fullWidth:!0,multiline:!0,disabled:p,size:"small",variant:"outlined",label:"Question statement",value:c.statementText,onChange:function(t){return l(Object(o.a)(Object(o.a)({},c),{},{statementText:t.target.value}))},InputProps:{endAdornment:Object(T.jsx)(Ee.a,{position:"end",children:p?Object(T.jsx)(k,{icon:Object(T.jsx)(te.a,{}),onClick:function(){y(v+1)}}):Object(T.jsx)(k,{icon:Object(T.jsx)(Je.a,{}),onClick:function(){""===c.type.trimStart()||""===c.statementText.trimStart()?S("Type or statement text must not be null."):d({variables:{question:{questionGroupId:c.questionGroupId,type:c.type.trim(),statementText:c.statementText.trim()}},errorPolicy:"none"}).then((function(t){console.log(t),h({id:t.data.addQuestion.id})})).catch((function(t){return console.log(t)}))}})})}})}),p&&function(){for(var t=[],e=0;e<v;e++)t.push(Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(nn,Object(o.a)({},p))}));return t}()]})})]})}function nn(t){var e=Ye(),n=Object(a.useState)({questionId:t.id,text:"",isCorrect:!1}),s=Object(i.a)(n,2),c=s[0],l=s[1],j=Object(V.useMutation)(ut),u=Object(i.a)(j,2),d=u[0],b=u[1].loading,O=Object(a.useState)(null),m=Object(i.a)(O,2),p=m[0],h=m[1],g=Object(a.useState)(null),f=Object(i.a)(g,2),v=f[0],y=f[1];return Object(T.jsxs)(r.a.Fragment,{children:[b&&Object(T.jsx)(ft,{open:b}),p&&Object(T.jsx)(gt,{error:p,open:p,onClose:function(){return h(null)}}),Object(T.jsx)(_e.a,{border:0,className:e.answerContainer,children:Object(T.jsx)(x.a,{container:!0,direction:"row",justify:"space-evenly",spacing:2,children:Object(T.jsx)(x.a,{item:!0,xs:12,children:Object(T.jsx)(N.a,{fullWidth:!0,disabled:v,size:"small",variant:"outlined",label:"Answer text",value:c.text,onChange:function(t){return l(Object(o.a)(Object(o.a)({},c),{},{text:t.target.value}))},InputProps:{startAdornment:Object(T.jsx)(Ee.a,{position:"start",children:Object(T.jsx)(k,{disabled:v,icon:c.isCorrect?Object(T.jsx)(De.a,{}):Object(T.jsx)(Ue.a,{}),onClick:function(){return l(Object(o.a)(Object(o.a)({},c),{},{isCorrect:!c.isCorrect}))}})}),endAdornment:Object(T.jsx)(Ee.a,{position:"end",children:null==v&&Object(T.jsx)(k,{icon:Object(T.jsx)(Je.a,{}),onClick:function(){""===c.text.trimStart()?h("Answer must not be null"):d({variables:{answer:{questionId:c.questionId,text:c.text.trim(),isCorrect:c.isCorrect}},errorPolicy:"none"}).then((function(t){y({id:t.data.addAnswer.id})})).catch((function(t){console.log(t),h("This answer is already assigned to this question.")}))}})})}})})})})]})}var an=n(209),rn=y()((function(t){return{section:{margin:t.spacing(2),padding:t.spacing(2)},title:{marginBottom:t.spacing(4)},questionGroup:{margin:t.spacing(2),marginBottom:t.spacing(4),padding:t.spacing(1)},question:{margin:t.spacing(1),padding:t.spacing(1)}}}));function sn(t){var e=t.section,n=t.passage,a=rn();return Object(T.jsxs)(_e.a,{border:1.5,className:a.section,children:[Object(T.jsx)("div",{className:a.title,children:Object(T.jsx)(P,{value:"Section ".concat(e),fontSize:"18px"})}),Object(T.jsx)("div",{children:n.split("\n").map((function(t){return Object(T.jsxs)(r.a.Fragment,{children:[Object(T.jsx)($,{value:t.substring(0,t.length-2)}),Object(T.jsx)("br",{})]})}))})]})}function cn(t){var e=t.questionGroups,n=rn();return Object(T.jsx)(r.a.Fragment,{children:e.map((function(t){return Object(T.jsxs)(_e.a,{border:0,className:n.questionGroup,children:[Object(T.jsx)("div",{className:n.title,children:Object(T.jsx)(P,{value:"Group ".concat(t.order),fontSize:"16px"})}),Object(T.jsx)($,{value:t.introText}),Object(T.jsx)(on,{questions:t.questions})]})}))})}function on(t){var e=t.questions;return Object(T.jsx)(r.a.Fragment,{children:e.map((function(t){return"TF"===t.type?Object(T.jsx)(ln,{order:t.order,statementText:t.statementText,answers:t.answers}):"FITB"===t.type?Object(T.jsx)(un,{order:t.order,statementText:t.statementText}):Object(T.jsx)(jn,{order:t.order,statementText:t.statementText,answers:t.answers})}))})}function ln(t){var e=t.order,n=t.statementText,a=rn();return Object(T.jsxs)(_e.a,{border:0,className:a.question,children:[Object(T.jsx)(B.a,{display:"inline",style:{marginRight:"25px",fontWeight:"bold"},children:e}),Object(T.jsx)(B.a,{display:"inline",children:n})]})}function jn(t){var e=t.order,n=t.statementText,a=t.answers,r=rn();return Object(T.jsxs)(_e.a,{border:0,className:r.question,children:[Object(T.jsx)(B.a,{display:"inline",style:{marginRight:"25px",fontWeight:"bold"},children:e}),Object(T.jsx)(B.a,{display:"inline",children:n}),Object(T.jsx)(_e.a,{border:0,style:{marginLeft:"25px"},children:a.map((function(t){return Object(T.jsxs)(_e.a,{border:0,children:[Object(T.jsx)(B.a,{display:"inline",style:{marginLeft:"10px",marginRight:"25px",fontWeight:"bold"},children:t.text.substring(0,1)}),Object(T.jsx)(B.a,{display:"inline",children:t.text.substring(3)})]})}))})]})}function un(t){var e=t.order,n=t.statementText,a=rn();return Object(T.jsxs)(_e.a,{border:0,className:a.question,children:[Object(T.jsx)(B.a,{display:"inline",style:{marginRight:"25px",fontWeight:"bold"},children:e}),Object(T.jsx)(B.a,{display:"inline",children:n.replace("_","_".repeat(20))})]})}var dn=y()((function(t){return{title:{marginBottom:t.spacing(4)},answer:{margin:t.spacing(1)}}}));function bn(t){var e=dn();return Object(T.jsx)(r.a.Fragment,{children:t.questionGroups.map((function(n){return Object(T.jsxs)(_e.a,{border:0,children:[Object(T.jsx)("div",{className:e.title,children:Object(T.jsx)(P,{value:"Group ".concat(n.order),fontSize:"16px"})}),Object(T.jsx)(On,{questions:n.questions,answers:t.answers,onAnswer:t.onAnswer})]})}))})}function On(t){var e=dn();return Object(T.jsx)(_e.a,{border:0,className:e.answer,children:t.questions.map((function(e){return Object(T.jsx)(xn,{type:e.type,id:e.id,order:e.order,answers:e.answers,onAnswer:t.onAnswer})}))})}function xn(t){var e=Ht()(),n=Object(a.useState)({questionId:parseInt(t.id,10),answerString:""}),s=Object(i.a)(n,2),c=s[0],o=s[1],l=function(e){o({questionId:parseInt(t.id,10),answerString:e.target.value})};return Object(a.useEffect)((function(){t.onAnswer(c)}),[c.answerString]),Object(T.jsx)(r.a.Fragment,{children:"TF"===t.type.toUpperCase()?Object(T.jsx)(N.a,{select:!0,fullWidth:!0,size:"small",variant:"outlined",id:t.order,label:"Question ".concat(t.order),value:c.answerString,style:{marginBottom:e.spacing(4)},onChange:function(t){return l(t)},children:t.answers.map((function(t){return Object(T.jsx)(W.a,{value:t.text,children:t.text},t.id)}))}):"FITB"===t.type.toUpperCase()?Object(T.jsx)(N.a,{fullWidth:!0,size:"small",variant:"outlined",id:t.order,label:"Question ".concat(t.order),value:c.answerString,style:{marginBottom:e.spacing(4)},onChange:function(t){return l(t)}}):Object(T.jsx)(N.a,{select:!0,fullWidth:!0,size:"small",variant:"outlined",id:t.order,label:"Question ".concat(t.order),value:c.answerString,style:{marginBottom:e.spacing(4)},onChange:function(t){return l(t)},children:t.answers.map((function(t){return Object(T.jsx)(W.a,{value:t.text,children:t.text.substring(0,1)},t.id)}))})})}var mn=n(342),pn=n(343),hn=n(344),gn=n(345),fn=n(206),vn=n.n(fn),yn=y()((function(t){return{paper:{padding:t.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"auto"},card:{borderRadius:"50px"},timer:{top:"auto",bottom:0},zoom:{position:"fixed",bottom:t.spacing(2),right:t.spacing(2)},alert:{fontWeight:"bold",backgroundColor:"white"}}}));function wn(t){var e=yn();return t.sections.map((function(n){return Object(T.jsxs)(x.a,{container:!0,spacing:3,children:[Object(T.jsx)(x.a,{item:!0,xs:12,children:Object(T.jsx)(f.a,{variant:"outlined",className:e.paper,children:Object(T.jsx)(sn,{section:n.order,passage:n.statementText})})}),Object(T.jsx)(x.a,{item:!0,xs:9,children:Object(T.jsx)(f.a,{variant:"outlined",className:e.paper,children:Object(T.jsx)(cn,{questionGroups:n.questionGroups})})}),Object(T.jsx)(x.a,{item:!0,xs:3,children:Object(T.jsx)(f.a,{variant:"outlined",className:e.paper,children:Object(T.jsx)(bn,{questionGroups:n.questionGroups,answers:t.answers,onAnswer:t.onAnswer})})})]})}))}function Cn(t){var e=yn(),n=Object(a.useState)(0),s=Object(i.a)(n,2),c=s[0],o=s[1],l=Object(a.useState)(null),j=Object(i.a)(l,2),u=j[0],d=j[1];return Object(a.useEffect)((function(){var e=setInterval((function(){o((function(n){100===n&&clearInterval(e);var a=100/(60*t.minutes);return Math.min(n+a,100)}))}),1e3)}),[]),Object(a.useEffect)((function(){c>=100?(d("".concat(t.reviewMinutes," minutes to review your result.")),setTimeout((function(){t.onTimeOut()}),60*t.reviewMinutes*1e3)):d(c>=83&&c<=85?"Only 10 minutes left.":c>=66&&c<=68?"20 minutes left. You should do section 3 now!":c>=33&&c<=35?"20 minutes passed!":null)}),[c]),Object(T.jsxs)(r.a.Fragment,{children:[Object(T.jsx)(Nt.a,{position:"fixed",className:e.timer,children:Object(T.jsx)("div",{style:{width:"100%"},children:Object(T.jsx)(mn.a,{variant:"determinate",value:c})})}),Object(T.jsx)(In,{alert:u})]})}function In(t){var e=yn();return Object(T.jsx)(_e.a,{className:e.zoom,position:"fixed",zIndex:"tooltip",children:Object(T.jsx)(pn.a,{in:t.alert,children:Object(T.jsx)(hn.a,{variant:"outlined",classes:{root:e.card},children:Object(T.jsx)(ve.a,{className:e.alert,children:Object(T.jsxs)(we.a,{children:[Object(T.jsx)(gn.a,{children:Object(T.jsx)(vn.a,{})}),Object(T.jsx)(Ce.a,{primary:t.alert})]})})})})})}var Tn=y()((function(t){return{testContainer:{paddingTop:t.spacing(4),paddingLeft:t.spacing(8),paddingBottom:t.spacing(4),paddingRight:t.spacing(8)},commentContainer:{paddingTop:t.spacing(4),paddingBottom:t.spacing(8)},cardHeader:{paddingBottom:t.spacing(1)},cardContent:{paddingTop:t.spacing(0)},noticed:{marginTop:t.spacing(20),display:"flex",flexDirection:"column",alignItems:"center"}}}));function Sn(){var t=Object(j.h)().id,e=Object(a.useContext)(vt),n=Object(i.a)(e,1)[0],s=Object(V.useQuery)(pe,{variables:{userId:parseInt(n.user.id,10),testId:parseInt(t,10)}}),c=s.loading,o=s.data,l=Object(a.useState)(!1),u=Object(i.a)(l,2),d=u[0],b=u[1],O=Object(V.useMutation)(bt),x=Object(i.a)(O,1)[0],m=Object(a.useState)(!1),p=Object(i.a)(m,2),h=p[0],g=p[1];return o||h?Object(T.jsx)(j.a,{to:"/view/".concat(t)}):Object(T.jsx)(r.a.Fragment,{children:c?Object(T.jsx)(ft,{open:c}):d?Object(T.jsx)(qn,{onDone:function(){g(!0)}}):Object(T.jsx)(kn,{onClick:function(){return b(!0),void x({variables:{testId:parseInt(t,10),userId:parseInt(n.user.id,10)}}).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))}})})}function kn(t){var e=Tn();return Object(T.jsxs)(Ct.a,{maxWidth:"xs",className:e.noticed,children:[Object(T.jsx)(P,{value:"Before you do your test...",fontSize:"18px"}),Object(T.jsxs)(x.a,{container:!0,children:[Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:[{id:"1",text:"Test will be account for 60 minutes. After 60 minutes, current answer will be submitted and result will be counted towards your rating."},{id:"2",text:"Please do not reload your browser while you do your test; or else, your answer will be deleted."},{id:"3",text:"You will be given additional 5 minutes to review your result after 60 minutes ended. Please submit your result in time."}].map((function(t){return Object(T.jsxs)(_e.a,{border:0,style:{marginTop:"18px"},children:[Object(T.jsx)(B.a,{display:"inline",style:{marginLeft:"10px",marginRight:"25px",fontWeight:"bold"},children:t.id}),Object(T.jsx)(B.a,{display:"inline",children:t.text})]})}))}),Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(S,{value:"Do test",onClick:function(){return t.onClick()}})})]})]})}function qn(t){var e=Object(j.h)().id,n=Tn(),s=Object(a.useContext)(vt),c=Object(i.a)(s,1)[0],o=Object(a.useState)([]),l=Object(i.a)(o,2),u=l[0],O=l[1],m=Object(V.useQuery)(me,{variables:{id:parseInt(e,10)}}),p=Object(V.useMutation)(dt),h=Object(i.a)(p,2),g=h[0],f=h[1].loading,v=function(){console.log(u),g({variables:{testSubmission:{testId:parseInt(e,10),userId:parseInt(c.user.id,10),answers:u}},errorPolicy:"none"}).then((function(t){console.log(t)})).catch((function(t){console.log(t)})),t.onDone()};return Object(T.jsxs)(r.a.Fragment,{children:[f&&Object(T.jsx)(ft,{open:f}),m.loading&&Object(T.jsx)(ft,{open:m.loading}),!m.loading&&Object(T.jsx)(Cn,{minutes:5,reviewMinutes:1,onTimeOut:v}),m.data&&Object(T.jsx)(x.a,{container:!0,direction:"row",justify:"flex-start",children:Object(T.jsxs)(Ct.a,{className:n.testContainer,children:["reading"===m.data.getTestById.type.toLowerCase()?Object(T.jsx)(wn,{sections:m.data.getTestById.sections,answers:u,onAnswer:function(){var t=Object(b.a)(d.a.mark((function t(e){var n,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(-1!==(n=u.findIndex((function(t){return t.questionId===e.questionId})))){t.next=6;break}return t.next=4,O([].concat(Object(an.a)(u),[{questionId:e.questionId,answerString:e.answerString}]));case 4:t.next=10;break;case 6:return(a=u)[n].answerString=e.answerString,t.next=10,O(a);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}):Object(T.jsx)("div",{children:"This is not developed yet."}),Object(T.jsx)(x.a,{container:!0,spacing:2,direction:"row",justify:"space-evenly",children:Object(T.jsx)(x.a,{item:!0,xs:4,children:Object(T.jsx)(S,{value:"Submit",onClick:function(){return v()}})})})]})})]})}var Nn=y()((function(t){return{root:{display:"flex"},content:{flexGrow:1,overflow:"auto"},appBarSpacer:t.mixins.toolbar}}));function Wn(){var t=Nn(),e=Object(j.g)(),n=Object(V.useMutation)(at),a=Object(i.a)(n,1)[0],r=[Object(T.jsx)(W.a,{onClick:function(){return s()},children:"Sign Out"})],s=function(){a().then().catch(),e.push("/")};return Object(T.jsx)(Re,{children:Object(T.jsxs)("div",{className:t.root,children:[Object(T.jsx)(Bt,{options:r}),Object(T.jsxs)("div",{className:t.content,children:[Object(T.jsx)("div",{className:t.appBarSpacer}),Object(T.jsx)(l.a,{basename:"/qnc-ielts-practice/tests",children:Object(T.jsxs)(j.d,{children:[Object(T.jsx)(j.b,{exact:!0,path:"/",component:fe}),Object(T.jsx)(j.b,{exact:!0,path:"/view/:id",children:Object(T.jsx)($e,{})}),Object(T.jsx)(j.b,{exact:!0,path:"/do/:id",children:Object(T.jsx)(Sn,{})}),Object(T.jsx)(j.b,{exact:!0,path:"/add",component:Ke})]})})]})]})})}var zn,An=n(324),Bn=n(152),Fn=n.n(Bn),Pn=n(207),$n=n(208),Ln=Fn()({palette:{primary:{light:"#8c332d",main:"#590004",dark:"#350000",contrastText:"#ffffff"},secondary:{light:"#ffec4e",main:"#fcba04",dark:"#c48a00",contrastText:"#000000"},chip:{listening:"#ff7077",reading:"#fede86"},table:{head:"#ffffff",text:"#000000",even:"#ffffff",odd:"#f5f5f5"},action:{hover:"#cccccc"}}}),Mn=Object($n.a)((function(t){var e=t.graphQLErrors,n=t.networkError;e&&console.log("graphQLErrors",e),n&&console.log("networkError",n)})),Rn=Object(V.createHttpLink)({uri:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL||"https://qnc-ielts-practice.herokuapp.com/graphql",credentials:"include"}),En=Object(Pn.a)((function(t,e){var n=e.headers;return{headers:Object(o.a)(Object(o.a)({},n),{},{authorization:zn?"Bearer ".concat(zn):""})}})),Gn=new V.ApolloClient({link:En.concat(V.ApolloLink.from([Mn,Rn])),cache:new V.InMemoryCache});function Dn(){var t=Object(a.useState)({status:!1,token:null,user:{id:null,username:null,role:{name:null}}}),e=Object(i.a)(t,2),n=e[0],r=e[1];return zn=n.token,Object(T.jsx)(An.a,{theme:Ln,children:Object(T.jsx)(V.ApolloProvider,{client:Gn,children:Object(T.jsx)(vt.Provider,{value:[n,r],children:Object(T.jsx)(l.a,{basename:"/qnc-ielts-practice",children:Object(T.jsxs)(j.d,{children:[Object(T.jsx)(j.b,{exact:!0,path:"/",component:wt}),Object(T.jsx)(j.b,{exact:!0,path:"/create-account",component:Tt}),Object(T.jsx)(j.b,{exact:!0,path:"/forgot-password",component:kt}),Object(T.jsx)(j.b,{path:"/tests",component:Wn})]})})})})})}c.a.render(Object(T.jsx)(Dn,{}),document.getElementById("root"))}},[[272,1,2]]]);
//# sourceMappingURL=main.794fd330.chunk.js.map