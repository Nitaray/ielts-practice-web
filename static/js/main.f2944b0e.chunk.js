(this["webpackJsonpielts-practice-app"]=this["webpackJsonpielts-practice-app"]||[]).push([[0],{238:function(e,t,n){},272:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(22),c=n.n(s),i=(n(238),n(9)),o=n(17),l=n(40),j=n(26),u=n(70),d=n(43),b=n.n(d),O=n(76),x=n(324),m=n(350),p=n(90),h=n.n(p),f=n(325),g=n(211),v=n(25),y=n.n(v),w=n(308),C=n(310),I=n(210),T=n(1);function S(e){var t=e.value,n=e.onClick,a=function(){return n()};return Object(T.jsx)(w.a,{fullWidth:!0,disableElevation:!0,variant:"contained",color:"primary",onClick:function(){return a()},children:t})}function k(e){var t=e.disabled,n=e.icon,a=e.onClick,r=function(){return a()};return Object(T.jsx)(C.a,{disabled:t,color:"primary",onClick:function(){return r()},children:n})}function q(e){var t=e.options,n=e.icon,a=r.a.useState(null),s=Object(i.a)(a,2),c=s[0],o=s[1];return Object(T.jsxs)(g.a,{elevation:0,children:[Object(T.jsx)(C.a,{color:"inherit","aria-haspopup":"true",onClick:function(e){return o(e.currentTarget)},children:n}),Object(T.jsx)(g.a,{elevation:0,style:{margin:"0px",border:"1px solid black"}}),Object(T.jsx)(I.a,{keepMounted:!0,elevation:2,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},anchorEl:c,open:Boolean(c),onClose:function(){return o(null)},children:t.map((function(e){return e}))})]})}var N=n(345),W=n(316);n(346);function z(e){var t=e.size,n=e.label,a=e.name,r=e.value,s=e.onChange,c=function(e){return s(e)};return Object(T.jsx)(N.a,{required:!0,fullWidth:!0,autoFocus:!0,variant:"outlined",margin:"normal",size:t,id:a,label:n,name:a,value:r,onChange:function(e){return c(e)}})}function A(e){var t=e.label,n=e.name,a=e.value,r=e.onChange,s=function(e){return r(e)};return Object(T.jsx)(N.a,{required:!0,fullWidth:!0,autoFocus:!0,variant:"outlined",margin:"normal",type:"password",id:n,label:t,name:n,value:a,onChange:function(e){return s(e)}})}var F=n(82),B=n(317);function $(e){var t=e.value,n=e.fontSize;return Object(T.jsx)(F.a,{noWrap:!0,color:"inherit",variant:"inherit",style:{fontWeight:"bold",fontSize:n},children:t})}function P(e){var t=e.value,n=e.align;return Object(T.jsx)(F.a,{align:n,children:t})}function M(e){var t=e.value,n=e.to;return Object(T.jsx)(B.a,{component:l.b,to:n,underline:"none",children:Object(T.jsx)(F.a,{variant:"body2",children:t})})}var L,Q,R,D,E,G,J,H,U,_,Y,K,X,V,Z=n(16),ee=n(27),te=n(23),ne=Object(te.a)(L||(L=Object(ee.a)(["\n     mutation Login($username: String!, $password: String!) {\n        login(username: $username, password: $password) {\n            token\n            user {\n                id\n                username\n                role {\n                    name\n                }\n            }\n        }\n     }   \n     "]))),ae=Object(te.a)(Q||(Q=Object(ee.a)(["\n     mutation signup($user: UserInput!) {\n          signup(user: $user) {\n               token\n          }\n     }\n     "]))),re=Object(te.a)(R||(R=Object(ee.a)(["\n\tmutation logout {\n\t\tlogout\n\t}\n"]))),se=Object(te.a)(D||(D=Object(ee.a)(["\n     mutation refreshJWT {\n          refreshJWT {\n               token\n               user {\n                    id\n                    username\n                    role {\n                         name\n                    }\n               }\n          }\n     }\n     "]))),ce=Object(te.a)(E||(E=Object(ee.a)(["\n    mutation createComment($comment: CommentInput!) {\n        createComment(comment: $comment) {\n            id\n        }\n    }\n"]))),ie=Object(te.a)(G||(G=Object(ee.a)(["\n    mutation deleteComment($commentId: Int!) {\n        deleteComment(commentId: $commentId) {\n            id\n        }\n    }\n"]))),oe=Object(te.a)(J||(J=Object(ee.a)(["\n    mutation addTest($test: TestInput!) {\n        addTest(test: $test) {\n            id\n            title\n            type\n        }\n    }\n    "]))),le=Object(te.a)(H||(H=Object(ee.a)(["\n    mutation addTestSection($section: TestSectionInput!) {\n        addTestSection(section: $section) {\n            id\n        }\n    }\n"]))),je=Object(te.a)(U||(U=Object(ee.a)(["\n    mutation addQuestionGroup($group: QuestionGroupInput!) {\n        addQuestionGroup(group: $group) {\n            id\n        }\n    }\n"]))),ue=Object(te.a)(_||(_=Object(ee.a)(["\n    mutation addQuestion($question: QuestionInput!) {\n        addQuestion(question: $question) {\n            id\n        }\n    }\n"]))),de=Object(te.a)(Y||(Y=Object(ee.a)(["\n    mutation addAnswer($answer: AnswerInput!) {\n        addAnswer(answer: $answer) {\n            id\n        }\n    }\n"]))),be=Object(te.a)(K||(K=Object(ee.a)(["\n\tmutation submitTest($testSubmission: TestSubmission!) {\n\t\tsubmitTest(testSubmission: $testSubmission) {\n\t\t\ttest {\n\t\t\t\tid\n\t\t\t\ttitle\n\t\t\t\ttype\n\t\t\t\tcomments {\n\t\t\t\t\tid\n\t\t\t\t\tuser {\n\t\t\t\t\t\tid\n\t\t\t\t\t\tusername\n\t\t\t\t\t}\n\t\t\t\t\tcontent\n\t\t\t\t\tcreated\n\t\t\t\t}\n\t\t\t}\n\t\t\tscore\n\t\t\tanswerHistory {\n\t\t\t\tquestion {\n\t\t\t\t\ttype\n\t\t\t\t\tstatementText\n\t\t\t\t}\n\t\t\t\tanswer {\n\t\t\t\t\ttext\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]))),Oe=Object(te.a)(X||(X=Object(ee.a)(["\n\tmutation startTest($testId: Int!, $userId: Int!) {\n\t\tstartTest(testId: $testId, userId: $userId) {\n\t\t\tid\n\t\t\ttitle\n\t\t\ttype\n\t\t}\n\t}\n"]))),xe=Object(te.a)(V||(V=Object(ee.a)(["\n\tmutation deleteTest($testId: Int!) {\n\t\tdeleteTest(testId: $testId) {\n\t\t\tid\n\t\t}\n\t}\n"]))),me=n(349),pe=n(320),he=n(318),fe=n(319),ge=n(321);function ve(e){var t=e.error,n=e.open,a=e.onClose,r=function(){return a()};return Object(T.jsx)("div",{children:Object(T.jsxs)(me.a,{open:n,onClose:r,children:[Object(T.jsx)(he.a,{children:Object(T.jsx)(fe.a,{children:t})}),Object(T.jsx)(pe.a,{children:Object(T.jsx)(w.a,{onClick:r,color:"primary",autoFocus:!0,children:"Close"})})]})})}function ye(e){var t=e.open;return Object(T.jsx)(me.a,{open:t,PaperProps:{style:{backgroundColor:"transparent",boxShadow:"none"}},children:Object(T.jsx)(he.a,{children:Object(T.jsx)(ge.a,{size:50})})})}var we=r.a.createContext(),Ce=y()((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)}}}));function Ie(){var e=Ce(),t=Object(j.g)(),n=Object(a.useState)({username:"",password:""}),s=Object(i.a)(n,2),c=s[0],l=s[1],d=Object(a.useState)(null),p=Object(i.a)(d,2),v=p[0],y=p[1],w=Object(Z.useMutation)(ne),C=Object(i.a)(w,2),I=C[0],k=C[1].loading,q=Object(a.useContext)(we),N=Object(i.a)(q,2),W=N[0],F=N[1],B=Object(Z.useMutation)(se),P=Object(i.a)(B,2),L=P[0],Q=P[1].loading;Object(a.useEffect)((function(){Object(O.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L();case 3:return t=e.sent,e.next=6,F({status:!0,token:t.data.refreshJWT.token,user:{id:t.data.refreshJWT.user.id,username:t.data.refreshJWT.user.username,role:{name:t.data.refreshJWT.user.role.name}}});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[]);var R=function(e){return function(t){t.preventDefault(),l(Object(o.a)(Object(o.a)({},c),{},Object(u.a)({},e,t.target.value)))}},D=function(){var e=Object(O.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I({variables:{username:c.username,password:c.password},errorPolicy:"none"}).then((function(e){F({status:!0,token:e.data.login.token,user:{id:e.data.login.user.id,username:e.data.login.user.username,role:{name:e.data.login.user.role.name}}}),t.push("/tests/")})).catch((function(e){y(!0)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return W.token?Object(T.jsx)(j.a,{to:"/tests"}):Object(T.jsxs)(r.a.Fragment,{children:[k&&Object(T.jsx)(ye,{open:k}),v&&Object(T.jsx)(ve,{error:"Invalid username/password. Please try again!",open:v,onClose:y(!1)}),!Q&&Object(T.jsxs)(x.a,{container:!0,component:"main",className:e.root,children:[Object(T.jsx)(f.a,{}),Object(T.jsx)(x.a,{item:!0,xs:!1,sm:4,md:8}),Object(T.jsx)(x.a,{item:!0,xs:12,sm:8,md:4,component:g.a,children:Object(T.jsxs)("div",{className:e.paper,children:[Object(T.jsx)(m.a,{className:e.avatar,children:Object(T.jsx)(h.a,{})}),Object(T.jsx)($,{value:"Sign In",fontSize:"18px"}),Object(T.jsxs)("form",{className:e.form,children:[Object(T.jsx)(z,{label:"Username",name:"username",value:c.username,onChange:R("username")}),Object(T.jsx)(A,{label:"Password",name:"password",value:c.password,onChange:R("password")}),Object(T.jsx)(S,{value:"Sign In",onClick:function(){return D()}}),Object(T.jsxs)(x.a,{container:!0,direction:"row",justify:"flex-end",children:[Object(T.jsx)(x.a,{item:!0,xs:!0,children:Object(T.jsx)(M,{value:"Forgot password!",to:"/forgot-password"})}),Object(T.jsx)(x.a,{item:!0,xs:!0,children:Object(T.jsx)(M,{value:"Don't have account?",to:"/create-account"})})]})]})]})})]})]})}var Te=n(326),Se=y()((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)}}}));function ke(){var e=Se(),t=Object(j.g)(),n=Object(a.useState)({name:"",username:"",password:"",confirmPassword:""}),s=Object(i.a)(n,2),c=s[0],l=s[1],d=Object(a.useState)(null),b=Object(i.a)(d,2),O=b[0],p=b[1],g=Object(Z.useMutation)(ae),v=Object(i.a)(g,2),y=v[0],w=v[1].loading,C=function(e){return function(t){return l(Object(o.a)(Object(o.a)({},c),{},Object(u.a)({},e,t.target.value)))}};return Object(T.jsxs)(r.a.Fragment,{children:[w&&Object(T.jsx)(ye,{open:w}),O&&Object(T.jsx)(ve,{error:"Please try again!",open:O,onClose:p(!1)}),Object(T.jsxs)(Te.a,{maxWidth:"xs",children:[Object(T.jsx)(f.a,{}),Object(T.jsxs)("div",{className:e.paper,children:[Object(T.jsx)(m.a,{className:e.avatar,children:Object(T.jsx)(h.a,{})}),Object(T.jsx)($,{value:"Create Account",fontSize:"18px"}),Object(T.jsxs)("form",{className:e.form,children:[Object(T.jsxs)(x.a,{container:!0,children:[Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(z,{label:"Full Name",name:"name",value:c.name,onChange:C("name")})}),Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(z,{label:"Username",name:"username",value:c.username,onChange:C("username")})}),Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(A,{label:"Password",name:"password",value:c.password,onChange:C("password")})}),Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(A,{label:"Confirm password",name:"confirm-password",value:c.confirmPassword,onChange:C("confirmPassword")})}),Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(S,{value:"Sign Up",onClick:function(){y({variables:{user:{username:c.username,password:c.password,name:c.name}},errorPolicy:"none"}).then((function(e){return t.push("/")})).catch((function(e){p(!0),console.log(e)}))}})})]}),Object(T.jsx)(x.a,{container:!0,children:Object(T.jsx)(x.a,{item:!0,xs:!0,children:Object(T.jsx)(M,{value:"Oh! I already have account",align:"right",to:"/"})})})]})]})]})]})}var qe=y()((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)}}}));function Ne(){var e,t=qe(),n=Object(a.useState)({email:""}),s=Object(i.a)(n,2),c=s[0],l=s[1];return Object(T.jsx)(r.a.Fragment,{children:Object(T.jsxs)(Te.a,{maxWidth:"xs",children:[Object(T.jsx)(f.a,{}),Object(T.jsxs)("div",{className:t.paper,children:[Object(T.jsx)(m.a,{className:t.avatar,children:Object(T.jsx)(h.a,{})}),Object(T.jsx)($,{value:"Recover password",fontSize:"18px"}),Object(T.jsxs)("form",{className:t.form,children:[Object(T.jsxs)(x.a,{container:!0,children:[Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(z,{label:"Email",name:"email",value:c.email,onChange:(e="email",function(t){return l(Object(o.a)(Object(o.a)({},c),{},Object(u.a)({},e,t.target.value)))})})}),Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(S,{value:"Recover password",onClick:function(){}})})]}),Object(T.jsx)(x.a,{container:!0,children:Object(T.jsx)(x.a,{item:!0,xs:!0,children:Object(T.jsx)(M,{value:"Back to home",align:"right",to:"/"})})})]})]})]})})}var We=n(328),ze=n(327),Ae=n(200),Fe=n.n(Ae),Be=y()((function(e){return{toolBar:{backgroundColor:e.palette.common.white,color:e.palette.common.black,justifyContent:"space-between",overflowX:"auto"},appBar:{marginBottom:e.spacing(0)}}}));function $e(e){var t=Be();return Object(T.jsx)(ze.a,{elevation:2,className:t.appBar,children:Object(T.jsxs)(We.a,{component:"nav",variant:"dense",className:t.toolBar,children:[Object(T.jsx)($,{value:"IELTS Training",component:"h1"}),Object(T.jsx)(q,{options:e.options,icon:Object(T.jsx)(Fe.a,{})})]})})}var Pe=n(329),Me=n(334),Le=n(335),Qe=n(332),Re=n(333),De=n(330),Ee=n(348),Ge=n(331),Je=n(353),He=n(354),Ue=n(352),_e=n(100),Ye=n.n(_e),Ke=y()((function(e){return{chip:{maxHeight:"18px",fontSize:"11px",fontWeight:"bold"}}}));function Xe(){var e=Ke(),t=Ye()();return Object(T.jsx)(Ue.a,{size:"small",label:"Listening",className:e.chip,style:{backgroundColor:t.palette.chip.listening}})}function Ve(){var e=Ke(),t=Ye()();return Object(T.jsx)(Ue.a,{size:"small",label:"Reading",className:e.chip,style:{backgroundColor:t.palette.chip.reading}})}var Ze,et,tt,nt,at,rt=n(136),st=n.n(rt),ct=n(81),it=n.n(ct),ot=n(101),lt=n.n(ot),jt=Object(te.a)(Ze||(Ze=Object(ee.a)(["\n    query allTests {\n        allTests {\n            id\n            title\n            type\n        }\n    }\n"]))),ut=Object(te.a)(et||(et=Object(ee.a)(["\n\tquery getUserById($id: Int!) {\n\t\tgetUserById(id: $id) {\n\t\t\tdoneTests {\n\t\t\t\tid\n\t\t\t}\n\t\t}\n\t}\n"]))),dt=Object(te.a)(tt||(tt=Object(ee.a)([" \t\n\tquery getTestById($id: Int!) {\n\t\tgetTestById(id: $id) {\n\t\t\tid\n\t\t\ttype\n\t\t\tsections {\n\t\t\t\tid\n \t\t\t\torder\n\t\t\t\ttype\n\t\t\t\tstatementText\n\t\t\t\tstatementAudio\n\t\t\t\tquestionGroups {\n\t\t\t\t\tid\n\t\t\t\t\torder\n\t\t\t\t\tintroText\n\t\t\t\t\tquestions {\n\t\t\t\t\t\tid\n\t\t\t\t\t\torder\n\t\t\t\t\t\ttype\n\t\t\t\t\t\tstatementText\n\t\t\t\t\t\tanswers {\n\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\ttext\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]))),bt=Object(te.a)(nt||(nt=Object(ee.a)(["\n\tquery getTestResult($userId: Int!, $testId: Int!) {\n     \tgetTestResult(userId: $userId, testId: $testId) {\n     \t\ttest {\n     \t\t\tid\n\t\t\t\ttitle\n\t\t\t\ttype\n     \t\t}\n     \t\tscore\n\t\t\tanswerHistory {\n\t\t\t\tquestion {\n                    statementText\n\t\t\t\t\ttrueAnswer {\n\t\t\t\t\t\ttext\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tanswer {\n\t\t\t\t\ttext\n\t\t\t\t}\n\t\t\t}\n     \t}\n\t}\n"]))),Ot=Object(te.a)(at||(at=Object(ee.a)(["\n\tquery getTestById($id: Int!) {\n\t\tgetTestById(id: $id) {\n\t\t\tcomments {\n\t\t\t\tid\n\t\t\t\tuser {\n\t\t\t\t\tid\n\t\t\t\t\tusername\n\t\t\t\t}\n\t\t\t\tcontent\n\t\t\t\tcreated\n\t\t\t}\n\t\t}\n\t}\n"])));function xt(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function mt(e,t){return"desc"===e?function(e,n){return xt(e,n,t)}:function(e,n){return-xt(e,n,t)}}function pt(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}var ht=Object(Pe.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{width:"inherit"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},toolbar:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1),justifyContent:"space-between",overflowX:"auto"},toolbarTitle:{flex:"1 1"}}})),ft=[{id:"id",numeric:!0,label:"#"},{id:"title",numeric:!1,label:"Title"},{id:"type",numeric:!1,label:"Type"},{id:"status",numeric:!1,label:"Status"}];function gt(e){var t=e.order,n=e.orderBy,a=e.deleteMode,r=e.onRequestSort;return Object(T.jsx)(De.a,{children:Object(T.jsxs)(Ge.a,{children:[ft.map((function(e){return Object(T.jsx)(Qe.a,{align:e.numeric?"right":"left",sortDirection:n===e.id&&t,children:Object(T.jsx)(Je.a,{active:n===e.id,direction:n===e.id?t:"asc",onClick:function(t){return r(t,e.id)},children:Object(T.jsx)($,{value:e.label})})},e.id)})),a&&Object(T.jsx)(Qe.a,{padding:"checkbox"})]})})}function vt(e){var t=ht(),n=Object(a.useContext)(we),s=Object(i.a)(n,1)[0];return Object(T.jsxs)(We.a,{className:t.toolbar,children:[Object(T.jsx)("div",{children:Object(T.jsx)(Ue.a,{size:"small"})}),Object(T.jsx)("div",{children:"admin"===s.user.role.name.toLowerCase()&&Object(T.jsxs)(r.a.Fragment,{children:[Object(T.jsx)(He.a,{title:"Add test",children:Object(T.jsx)(C.a,{onClick:function(){return e.onAdd()},children:Object(T.jsx)(it.a,{})})}),Object(T.jsx)(He.a,{title:"Delete test",children:Object(T.jsx)(C.a,{onClick:function(){return e.onDelete()},children:Object(T.jsx)(lt.a,{})})})]})})]})}function yt(e){var t=e.allTests,n=e.doneTests,s=Object(a.useContext)(we),c=Object(i.a)(s,1)[0],o=Object(j.g)(),l=ht(),u=Object(a.useState)([]),d=Object(i.a)(u,2),b=d[0],O=d[1],x=Object(a.useState)(!1),m=Object(i.a)(x,2),p=m[0],h=m[1],f=Object(a.useState)("asc"),v=Object(i.a)(f,2),y=v[0],w=v[1],I=Object(a.useState)("id"),S=Object(i.a)(I,2),k=S[0],q=S[1],N=Object(a.useState)(0),W=Object(i.a)(N,2),z=W[0],A=W[1],F=Object(a.useState)(10),B=Object(i.a)(F,2),$=B[0],P=B[1],L=Object(Z.useMutation)(xe,{refetchQueries:[{query:ut,variables:{id:parseInt(c.user.id,10)}},{query:jt}]}),Q=Object(i.a)(L,2),R=Q[0],D=Q[1].loading,E=$-Math.min($,t.length-z*$);Object(a.useEffect)((function(){var e=[];t.map((function(t){e.push({id:t.id,title:t.title,type:t.type,status:-1!==n.findIndex((function(e){return e.id===t.id}))})})),O(e)}),[]);return Object(T.jsxs)(r.a.Fragment,{children:[D&&Object(T.jsx)(ye,{open:D}),Object(T.jsx)("div",{className:l.root,children:Object(T.jsxs)(g.a,{variant:"outlined",className:l.paper,children:[Object(T.jsx)(vt,{onDelete:function(){return h(!p)},onAdd:function(){return o.push("/add")}}),Object(T.jsx)(Re.a,{children:Object(T.jsxs)(Me.a,{size:"small",className:l.table,children:[Object(T.jsx)(gt,{order:y,orderBy:k,deleteMode:p,onRequestSort:function(e,t){w(k===t&&"asc"===y?"desc":"asc"),q(t)},rowCount:b.length}),Object(T.jsxs)(Le.a,{children:[pt(b,mt(y,k)).slice(z*$,z*$+$).map((function(e){return Object(T.jsxs)(Ge.a,{hover:!0,tabIndex:-1,style:{height:45},children:[Object(T.jsx)(Qe.a,{align:"right",children:e.id}),Object(T.jsx)(Qe.a,{align:"left",children:Object(T.jsx)(M,{value:e.title,to:e.status?"/view/".concat(e.id):"/do/".concat(e.id)})}),Object(T.jsx)(Qe.a,{align:"left",children:"listening"===e.type.toLowerCase()?Object(T.jsx)(Xe,{}):Object(T.jsx)(Ve,{})}),Object(T.jsx)(Qe.a,{align:"left",children:e.status&&Object(T.jsx)(st.a,{fontSize:"small"})}),p&&Object(T.jsx)(Qe.a,{children:Object(T.jsx)(C.a,{size:"small",onClick:function(){return t=e.id,void R({variables:{testId:t}}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));var t},children:Object(T.jsx)(lt.a,{})})})]},e.id)})),E>0&&Object(T.jsx)(Ge.a,{style:{height:45*E},children:Object(T.jsx)(Qe.a,{colSpan:6})})]})]})}),Object(T.jsx)(Ee.a,{rowsPerPageOptions:[10,25,50,100],component:"div",count:b.length,rowsPerPage:$,page:z,onChangePage:function(e,t){return A(t)},onChangeRowsPerPage:function(e){P(parseInt(e.target.value,10)),A(0)}})]})})]})}var wt=y()((function(e){return{container:{paddingTop:e.spacing(4),paddingLeft:e.spacing(8),paddingBottom:e.spacing(4),paddingRight:e.spacing(8)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"auto"}}}));function Ct(){var e=wt(),t=Object(a.useContext)(we),n=Object(i.a)(t,1)[0],s=Object(Z.useQuery)(jt),c=Object(Z.useQuery)(ut,{variables:{id:parseInt(n.user.id,10)}});return s.error&&console.log(s.error),c.data&&console.log(c.data),c.error&&(console.log(n),console.log(c.error)),Object(T.jsxs)(r.a.Fragment,{children:[(s.loading||c.loading)&&Object(T.jsx)(ye,{open:s.loading||c.loading}),Object(T.jsx)(Te.a,{className:e.container,children:Object(T.jsxs)(x.a,{container:!0,spacing:3,children:[Object(T.jsx)(x.a,{item:!0,xs:12,md:8,children:Object(T.jsx)(g.a,{elevation:0,children:s.data&&c.data&&Object(T.jsx)(yt,{allTests:s.data.allTests,doneTests:c.data.getUserById.doneTests})})}),Object(T.jsx)(x.a,{item:!0,xs:0,md:4,children:Object(T.jsx)(g.a,{className:e.paper})})]})})]})}var It=n(313),Tt=n(336),St=n(277),kt=n(337),qt=n(339),Nt=n(338),Wt=n(202),zt=n.n(Wt);function At(e){var t=Math.floor((Date.now()-e)/1e3),n=0;return(n=t/31536e3)>1?Math.floor(n)+" years ago":(n=t/2592e3)>1?Math.floor(n)+" months ago":(n=t/86400)>1?Math.floor(n)+" days ago":(n=t/3600)>1?Math.floor(n)+" hours ago":(n=t/60)>1?Math.floor(n)+" minutes ago":Math.floor(t)+" seconds ago"}var Ft=Object(Pe.a)((function(e){return{root:{width:"100%"},fonts:{fontWeight:"bold"},listItemSecondaryAction:{visibility:"hidden"},listItem:{"&:hover $listItemSecondaryAction":{visibility:"inherit"}}}}));function Bt(e){var t=Ft(),n=Object(a.useContext)(we),s=Object(i.a)(n,1)[0],c=Object(a.useState)(""),o=Object(i.a)(c,2),l=o[0],j=o[1],u=Object(Z.useMutation)(ce,{refetchQueries:[{query:Ot,variables:{id:parseInt(e.testId,10)}}]}),d=Object(i.a)(u,2),b=d[0],O=d[1].loading,x=Object(Z.useMutation)(ie,{refetchQueries:[{query:Ot,variables:{id:parseInt(e.testId,10)}}]}),p=Object(i.a)(x,1)[0],h=Object(a.useState)(null),f=Object(i.a)(h,2),g=f[0],v=f[1];return Object(T.jsxs)(r.a.Fragment,{children:[O&&Object(T.jsx)(ye,{open:O}),g&&Object(T.jsx)(ve,{error:g,open:g,onClose:function(){return v(null)}}),Object(T.jsxs)(It.a,{className:t.root,children:[e.comments&&e.comments.map((function(e){return Object(T.jsxs)(r.a.Fragment,{children:[Object(T.jsxs)(St.a,{alignItems:"flex-start",classes:{container:t.listItem},children:[Object(T.jsx)(Tt.a,{children:Object(T.jsx)(m.a,{})}),Object(T.jsx)(kt.a,{primary:Object(T.jsx)(F.a,{style:{fontWeight:"bold",fontSize:"14px"},children:e.user.username}),secondary:Object(T.jsxs)(r.a.Fragment,{children:[Object(T.jsx)(F.a,{variant:"body1",color:"textPrimary",style:{fontSize:"16px"},children:e.content}),Object(T.jsx)(F.a,{variant:"body2",color:"textSecondary",style:{fontSize:"12px"},children:At(+e.created)})]}),style:{maxWidth:"90%"}}),("admin"===s.user.role.name.toLowerCase()||"moderator"===s.user.role.name.toLowerCase()||s.user.id===e.user.id)&&Object(T.jsx)(Nt.a,{className:t.listItemSecondaryAction,children:Object(T.jsx)(C.a,{onClick:function(){return t=e.id,void p({variables:{commentId:parseInt(t,10)}}).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}));var t},children:Object(T.jsx)(lt.a,{})})})]}),Object(T.jsx)(qt.a,{})]})})),Object(T.jsxs)(St.a,{alignItems:"flex-start",children:[Object(T.jsx)(kt.a,{secondary:Object(T.jsx)(r.a.Fragment,{children:Object(T.jsx)(N.a,{multiline:!0,fullWidth:!0,size:"small",variant:"outlined",id:"comment",value:l,placeholder:"Type your comment here...",onChange:function(e){return j(e.target.value)}})}),style:{maxWidth:"95%"}}),Object(T.jsx)(Nt.a,{children:Object(T.jsx)(C.a,{onClick:function(){b({variables:{comment:{content:l,testId:parseInt(e.testId,10),userId:parseInt(s.user.id,10)}}}).then((function(e){j("")})).catch((function(e){v("Hey please, don't spam. We don't have the money to buy more storage for our database.")}))},children:Object(T.jsx)(zt.a,{})})})]})]})]})}var $t=n(203),Pt=n.n($t),Mt=y()((function(e){return{root:{margin:e.spacing(2,24,2,24),padding:e.spacing(2,8,2,8)},toolbar:{justifyContent:"space-between",overflowX:"auto"}}}));function Lt(){var e=Object(j.h)().id,t=Object(a.useContext)(we),n=Object(i.a)(t,1)[0],s=Object(Z.useQuery)(bt,{variables:{userId:parseInt(n.user.id,10),testId:parseInt(e,10)}}),c=Object(Z.useQuery)(Ot,{variables:{id:parseInt(e,10)}});return s.error?Object(T.jsx)(j.a,{to:"/do/".concat(e)}):Object(T.jsx)(r.a.Fragment,{children:s.loading||c.loading?Object(T.jsx)(ye,{open:s.loading||c.loading}):Object(T.jsxs)(r.a.Fragment,{children:[Object(T.jsx)(Qt,Object(o.a)({},s.data.getTestResult)),Object(T.jsx)(Rt,Object(o.a)({},c.data.getTestById))]})})}function Qt(e){var t=Mt();return Object(T.jsxs)(g.a,{variant:"outlined",className:t.root,children:[Object(T.jsxs)(We.a,{className:t.toolbar,children:[Object(T.jsx)("div",{children:Object(T.jsx)($,{value:e.test.title})}),Object(T.jsx)("div",{children:Object(T.jsx)($,{value:"Your score: ".concat(e.score)})}),Object(T.jsx)("div",{children:"reading"===e.test.type.toLowerCase()?Object(T.jsx)(Ve,{}):Object(T.jsx)(Xe,{})})]}),Object(T.jsx)(Re.a,{children:Object(T.jsxs)(Me.a,{size:"small",children:[Object(T.jsx)(De.a,{children:Object(T.jsx)(Ge.a,{children:["Question","Correct Answer","Your Answer","Matched"].map((function(e){return Object(T.jsx)(Qe.a,{align:"left",children:Object(T.jsx)($,{value:e})})}))})}),Object(T.jsx)(Le.a,{children:e.answerHistory.map((function(e){return Object(T.jsxs)(Ge.a,{children:[Object(T.jsx)(Qe.a,{align:"left",children:Object(T.jsx)(P,{value:e.question.statementText})}),Object(T.jsx)(Qe.a,{align:"left",children:Object(T.jsx)(P,{value:e.question.trueAnswer[0]?e.question.trueAnswer[0].text:""})}),Object(T.jsx)(Qe.a,{align:"left",children:Object(T.jsx)(P,{value:e.answer?e.answer.text:""})}),Object(T.jsx)(Qe.a,{align:"left",children:e.answer.text===(e.question.trueAnswer[0]?e.question.trueAnswer[0].text:"")?Object(T.jsx)(st.a,{}):Object(T.jsx)(Pt.a,{})})]})}))})]})})]})}function Rt(e){var t=Object(j.h)().id,n=Mt(),r=Object(a.useState)([]),s=Object(i.a)(r,2),c=s[0],o=s[1];return Object(a.useEffect)((function(){o(e.comments)})),Object(T.jsx)(g.a,{variant:"outlined",className:n.root,children:Object(T.jsx)(x.a,{container:!0,direction:"row",justify:"space-evenly",spacing:2,children:Object(T.jsx)(x.a,{item:!0,xs:12,children:Object(T.jsx)(Bt,{testId:t,comments:c})})})})}function Dt(e){var t=e.children,n=Object(a.useContext)(we),r=Object(i.a)(n,2),s=r[0],c=r[1],o=Object(a.useState)(!1),l=Object(i.a)(o,2),u=l[0],d=l[1],x=Object(Z.useMutation)(se),m=Object(i.a)(x,1)[0],p=function(){var e=Object(O.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("refreshJWT"),e.prev=1,e.next=4,m();case 4:return t=e.sent,e.next=7,c({status:!0,token:t.data.refreshJWT.token,user:{id:t.data.refreshJWT.user.id,username:t.data.refreshJWT.user.username,role:{name:t.data.refreshJWT.user.role.name}}});case 7:e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(1),console.log(e.t0),e.next=14,d(!0);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){Object(O.a)(b.a.mark((function e(){var t,n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==s.token){e.next=9;break}if(t=s.token.split(".")[1],n=new Date(t),a=new Date,!(n.getTime()-a.getTime()<3e5)){e.next=7;break}return e.next=7,p();case 7:e.next=11;break;case 9:return e.next=11,p();case 11:case"end":return e.stop()}}),e)})))()}),[]),u?Object(T.jsx)(j.a,{to:"/"}):t}var Et=n(340),Gt=n(204),Jt=n.n(Gt),Ht=n(205),Ut=n.n(Ht),_t=n(355),Yt=n(102),Kt=n.n(Yt),Xt=y()((function(e){return{form:{width:"100%",marginTop:e.spacing(3)},createTestContainer:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},mainContainer:{margin:e.spacing(2,0,8)},testContainer:{padding:e.spacing(4,8,4,8)},testSectionContainer:{marginTop:e.spacing(2),padding:e.spacing(4)},questionGroupContainer:{paddingLeft:e.spacing(2)},questionContainer:{paddingLeft:e.spacing(2)},answerContainer:{paddingLeft:e.spacing(4)},paddingContainer:{paddingLeft:e.spacing(2)}}}));function Vt(){var e=Xt(),t=Object(a.useContext)(we),n=Object(i.a)(t,1)[0],s=Object(a.useState)(null),c=Object(i.a)(s,2),l=c[0],u=c[1],d=Object(a.useState)(!1),b=Object(i.a)(d,2),O=b[0],m=b[1];return n.token&&"admin"===n.user.role.name.toLowerCase()?Object(T.jsx)(r.a.Fragment,{children:l?O?Object(T.jsxs)(Te.a,{maxWidth:"xs",className:e.createTestContainer,children:[Object(T.jsx)($,{value:"Test successfully created",fontSize:"18px"}),Object(T.jsx)(M,{value:"Go back to homepage",to:"/"})]}):Object(T.jsx)(_t.a,{border:0,className:e.mainContainer,children:Object(T.jsxs)(x.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:[Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(en,Object(o.a)({},l))}),Object(T.jsx)(x.a,{item:!0,xs:12,sm:6,children:Object(T.jsx)(S,{value:"Finish",onClick:function(){return m(!0)}})})]})}):Object(T.jsx)(Zt,{onClick:function(e,t,n){return function(e,t,n){u({id:e,title:t,type:n})}(e,t,n)}})}):Object(T.jsx)(j.a,{to:"/"})}function Zt(e){var t=Xt(),n=Object(a.useContext)(we),s=Object(i.a)(n,1)[0],c=Object(a.useState)({title:"",type:""}),l=Object(i.a)(c,2),j=l[0],u=l[1],d=Object(Z.useMutation)(oe,{refetchQueries:[{query:ut,variables:{id:parseInt(s.user.id,10)}},{query:jt}]}),b=Object(i.a)(d,2),O=b[0],m=b[1].loading,p=Object(a.useState)(null),h=Object(i.a)(p,2),f=h[0],g=h[1];return Object(T.jsxs)(r.a.Fragment,{children:[m&&Object(T.jsx)(ye,{open:m}),f&&Object(T.jsx)(ve,{error:f,open:f,onClose:function(){return g(null)}}),Object(T.jsxs)(Te.a,{maxWidth:"xs",className:t.createTestContainer,children:[Object(T.jsx)($,{value:"Create test",fontSize:"18px"}),Object(T.jsx)("form",{className:t.form,children:Object(T.jsxs)(x.a,{container:!0,spacing:2,children:[Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(N.a,{fullWidth:!0,variant:"outlined",label:"Title",value:j.title,onChange:function(e){return u(Object(o.a)(Object(o.a)({},j),{},{title:e.target.value}))}})}),Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(N.a,{select:!0,fullWidth:!0,variant:"outlined",label:"Type",value:j.type,onChange:function(e){return u(Object(o.a)(Object(o.a)({},j),{},{type:e.target.value}))},children:["Reading","Listening"].map((function(e){return Object(T.jsx)(W.a,{value:e,children:e},e)}))})}),Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(S,{value:"Create Test",onClick:function(){""===j.title.trimStart()||""===j.type.trimStart()?g("Title and type must not be null."):O({variables:{test:{title:j.title.trim(),type:j.type}}}).then((function(t){e.onClick(t.data.addTest.id,t.data.addTest.title,t.data.addTest.type)})).catch((function(e){console.log(e),g("A test with the same title and type already exists!")}))}})})]})})]})]})}function en(e){var t=Xt(),n=Object(a.useState)(1),r=Object(i.a)(n,2),s=r[0],c=r[1];return Object(T.jsx)(_t.a,{border:0,className:t.testContainer,children:Object(T.jsxs)(x.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"center",spacing:2,children:[Object(T.jsx)(x.a,{item:!0,xs:12,sm:8,children:Object(T.jsx)($,{value:"Title: ".concat(e.title),fontSize:"18px"})}),Object(T.jsx)(x.a,{item:!0,xs:3,sm:1,children:Object(T.jsx)($,{value:"ID: ".concat(e.id),fontSize:"18px"})}),Object(T.jsx)(x.a,{item:!0,xs:3,sm:1,children:"reading"===e.type.toLowerCase()?Object(T.jsx)(Ve,{}):Object(T.jsx)(Xe,{})}),Object(T.jsx)(x.a,{item:!0,xs:6,sm:2,children:Object(T.jsx)(S,{value:Object(T.jsx)(it.a,{}),onClick:function(){c(s+1)}})}),function(){for(var t=[],n=0;n<s;n++)t.push(Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(tn,Object(o.a)({},e))}));return t}()]})})}function tn(e){var t=Xt(),n=Object(a.useState)({testId:e.id,type:e.type,text:"",audio:""}),s=Object(i.a)(n,2),c=s[0],l=s[1],j=Object(Z.useMutation)(le),u=Object(i.a)(j,2),d=u[0],b=u[1].loading,O=Object(a.useState)(1),m=Object(i.a)(O,2),p=m[0],h=m[1],f=Object(a.useState)(null),v=Object(i.a)(f,2),y=v[0],w=v[1],C=Object(a.useState)(null),I=Object(i.a)(C,2),S=I[0],q=I[1];return Object(T.jsxs)(r.a.Fragment,{children:[b&&Object(T.jsx)(ye,{open:b}),S&&Object(T.jsx)(ve,{error:S,open:S,onClose:function(){return q(null)}}),Object(T.jsx)(g.a,{variant:"outlined",className:t.testSectionContainer,children:Object(T.jsxs)(x.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center",spacing:2,children:[Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(N.a,{fullWidth:!0,multiline:!0,disabled:y,size:"small",variant:"outlined",label:"Section statement text",value:c.text,onChange:function(e){return l(Object(o.a)(Object(o.a)({},c),{},{text:e.target.value}))},InputProps:{endAdornment:Object(T.jsx)(Et.a,{position:"end",children:y?Object(T.jsx)(k,{icon:Object(T.jsx)(it.a,{}),onClick:function(){h(p+1)}}):Object(T.jsx)(k,{icon:Object(T.jsx)(Kt.a,{}),onClick:function(){""===c.text.trimStart()&&""===c.audio.trimStart()?q("Text or audio must not be null."):d({variables:{section:{testId:c.testId,type:c.type,text:c.text.trim(),audio:c.audio.trim()}},errorPolicy:"none"}).then((function(e){w({id:e.data.addTestSection.id})})).catch((function(e){console.log(e)}))}})})}})}),y&&function(){for(var e=[],t=0;t<p;t++)e.push(Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(nn,Object(o.a)({},y))}));return e}()]})})]})}function nn(e){var t=Xt(),n=Object(a.useState)({sectionId:e.id,introText:""}),s=Object(i.a)(n,2),c=s[0],l=s[1],j=Object(Z.useMutation)(je),u=Object(i.a)(j,2),d=u[0],b=u[1].loading,O=Object(a.useState)(null),m=Object(i.a)(O,2),p=m[0],h=m[1],f=Object(a.useState)(1),g=Object(i.a)(f,2),v=g[0],y=g[1],w=Object(a.useState)(null),C=Object(i.a)(w,2),I=C[0],S=C[1];return Object(T.jsxs)(r.a.Fragment,{children:[b&&Object(T.jsx)(ye,{open:b}),I&&Object(T.jsx)(ve,{error:I,open:I,onClose:function(){return S(null)}}),Object(T.jsx)(_t.a,{border:0,className:t.questionGroupContainer,children:Object(T.jsxs)(x.a,{container:!0,direction:"row",justify:"flex-end",spacing:2,children:[Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(N.a,{fullWidth:!0,multiline:!0,disabled:p,size:"small",variant:"outlined",label:"Introduction text",value:c.introText,onChange:function(e){return l(Object(o.a)(Object(o.a)({},c),{},{introText:e.target.value}))},InputProps:{endAdornment:Object(T.jsx)(Et.a,{position:"end",children:p?Object(T.jsx)(k,{icon:Object(T.jsx)(it.a,{}),onClick:function(){y(v+1)}}):Object(T.jsx)(k,{icon:Object(T.jsx)(Kt.a,{}),onClick:function(){""===c.introText.trimStart()?S("Intro text for question group must not be null."):d({variables:{group:{sectionId:c.sectionId,introText:c.introText.trim()}},errorPolicy:"none"}).then((function(e){console.log(e),h({id:e.data.addQuestionGroup.id}),console.log(e)})).catch((function(e){return console.log(e)}))}})})}})}),p&&function(){for(var e=[],t=0;t<v;t++)e.push(Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(an,Object(o.a)({},p))}));return e}()]})})]})}function an(e){var t=Xt(),n=Object(a.useState)({questionGroupId:e.id,type:"",statementText:""}),s=Object(i.a)(n,2),c=s[0],l=s[1],j=Object(Z.useMutation)(ue),u=Object(i.a)(j,2),d=u[0],b=u[1].loading,O=Object(a.useState)(null),m=Object(i.a)(O,2),p=m[0],h=m[1],f=Object(a.useState)(1),g=Object(i.a)(f,2),v=g[0],y=g[1],w=Object(a.useState)(null),C=Object(i.a)(w,2),I=C[0],S=C[1];return Object(T.jsxs)(r.a.Fragment,{children:[b&&Object(T.jsx)(ye,{open:b}),I&&Object(T.jsx)(ve,{error:I,open:I,onClose:function(){return S(null)}}),Object(T.jsx)(_t.a,{border:0,className:t.questionContainer,children:Object(T.jsxs)(x.a,{container:!0,direction:"row",justify:"space-evenly",spacing:2,children:[Object(T.jsx)(x.a,{item:!0,xs:6,sm:1,children:Object(T.jsx)(N.a,{select:!0,fullWidth:!0,disabled:p,size:"small",variant:"outlined",label:"Type",value:c.type,onChange:function(e){return l(Object(o.a)(Object(o.a)({},c),{},{type:e.target.value}))},children:["FITB","MC","TF"].map((function(e){return Object(T.jsx)(W.a,{value:e,children:e},e)}))})}),Object(T.jsx)(x.a,{item:!0,xs:12,sm:11,children:Object(T.jsx)(N.a,{fullWidth:!0,multiline:!0,disabled:p,size:"small",variant:"outlined",label:"Question statement",value:c.statementText,onChange:function(e){return l(Object(o.a)(Object(o.a)({},c),{},{statementText:e.target.value}))},InputProps:{endAdornment:Object(T.jsx)(Et.a,{position:"end",children:p?Object(T.jsx)(k,{icon:Object(T.jsx)(it.a,{}),onClick:function(){y(v+1)}}):Object(T.jsx)(k,{icon:Object(T.jsx)(Kt.a,{}),onClick:function(){""===c.type.trimStart()||""===c.statementText.trimStart()?S("Type or statement text must not be null."):d({variables:{question:{questionGroupId:c.questionGroupId,type:c.type.trim(),statementText:c.statementText.trim()}},errorPolicy:"none"}).then((function(e){console.log(e),h({id:e.data.addQuestion.id})})).catch((function(e){return console.log(e)}))}})})}})}),p&&function(){for(var e=[],t=0;t<v;t++)e.push(Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(rn,Object(o.a)({},p))}));return e}()]})})]})}function rn(e){var t=Xt(),n=Object(a.useState)({questionId:e.id,text:"",isCorrect:!1}),s=Object(i.a)(n,2),c=s[0],l=s[1],j=Object(Z.useMutation)(de),u=Object(i.a)(j,2),d=u[0],b=u[1].loading,O=Object(a.useState)(null),m=Object(i.a)(O,2),p=m[0],h=m[1],f=Object(a.useState)(null),g=Object(i.a)(f,2),v=g[0],y=g[1];return Object(T.jsxs)(r.a.Fragment,{children:[b&&Object(T.jsx)(ye,{open:b}),p&&Object(T.jsx)(ve,{error:p,open:p,onClose:function(){return h(null)}}),Object(T.jsx)(_t.a,{border:0,className:t.answerContainer,children:Object(T.jsx)(x.a,{container:!0,direction:"row",justify:"space-evenly",spacing:2,children:Object(T.jsx)(x.a,{item:!0,xs:12,children:Object(T.jsx)(N.a,{fullWidth:!0,disabled:v,size:"small",variant:"outlined",label:"Answer text",value:c.text,onChange:function(e){return l(Object(o.a)(Object(o.a)({},c),{},{text:e.target.value}))},InputProps:{startAdornment:Object(T.jsx)(Et.a,{position:"start",children:Object(T.jsx)(k,{disabled:v,icon:c.isCorrect?Object(T.jsx)(Jt.a,{}):Object(T.jsx)(Ut.a,{}),onClick:function(){return l(Object(o.a)(Object(o.a)({},c),{},{isCorrect:!c.isCorrect}))}})}),endAdornment:Object(T.jsx)(Et.a,{position:"end",children:null==v&&Object(T.jsx)(k,{icon:Object(T.jsx)(Kt.a,{}),onClick:function(){""===c.text.trimStart()?h("Answer must not be null"):d({variables:{answer:{questionId:c.questionId,text:c.text.trim(),isCorrect:c.isCorrect}},errorPolicy:"none"}).then((function(e){y({id:e.data.addAnswer.id})})).catch((function(e){console.log(e),h("This answer is already assigned to this question.")}))}})})}})})})})]})}var sn=n(209),cn=y()((function(e){return{section:{margin:e.spacing(2),padding:e.spacing(2)},title:{marginBottom:e.spacing(4)},questionGroup:{margin:e.spacing(2),marginBottom:e.spacing(4),padding:e.spacing(1)},question:{margin:e.spacing(1),padding:e.spacing(1)}}}));function on(e){var t=e.section,n=e.passage,a=cn();return Object(T.jsxs)(_t.a,{border:1.5,className:a.section,children:[Object(T.jsx)("div",{className:a.title,children:Object(T.jsx)($,{value:"Section ".concat(t),fontSize:"18px"})}),Object(T.jsx)("div",{children:n.split("\n").map((function(e){return Object(T.jsxs)(r.a.Fragment,{children:[Object(T.jsx)(P,{value:e.substring(0,e.length-2)}),Object(T.jsx)("br",{})]})}))})]})}function ln(e){var t=e.questionGroups,n=cn();return Object(T.jsx)(r.a.Fragment,{children:t.map((function(e){return Object(T.jsxs)(_t.a,{border:0,className:n.questionGroup,children:[Object(T.jsx)("div",{className:n.title,children:Object(T.jsx)($,{value:"Group ".concat(e.order),fontSize:"16px"})}),Object(T.jsx)(P,{value:e.introText}),Object(T.jsx)(jn,{questions:e.questions})]})}))})}function jn(e){var t=e.questions;return Object(T.jsx)(r.a.Fragment,{children:t.map((function(e){return"TF"===e.type?Object(T.jsx)(un,{order:e.order,statementText:e.statementText,answers:e.answers}):"FITB"===e.type?Object(T.jsx)(bn,{order:e.order,statementText:e.statementText}):Object(T.jsx)(dn,{order:e.order,statementText:e.statementText,answers:e.answers})}))})}function un(e){var t=e.order,n=e.statementText,a=cn();return Object(T.jsxs)(_t.a,{border:0,className:a.question,children:[Object(T.jsx)(F.a,{display:"inline",style:{marginRight:"25px",fontWeight:"bold"},children:t}),Object(T.jsx)(F.a,{display:"inline",children:n})]})}function dn(e){var t=e.order,n=e.statementText,a=e.answers,r=cn();return Object(T.jsxs)(_t.a,{border:0,className:r.question,children:[Object(T.jsx)(F.a,{display:"inline",style:{marginRight:"25px",fontWeight:"bold"},children:t}),Object(T.jsx)(F.a,{display:"inline",children:n}),Object(T.jsx)(_t.a,{border:0,style:{marginLeft:"25px"},children:a.map((function(e){return Object(T.jsxs)(_t.a,{border:0,children:[Object(T.jsx)(F.a,{display:"inline",style:{marginLeft:"10px",marginRight:"25px",fontWeight:"bold"},children:e.text.substring(0,1)}),Object(T.jsx)(F.a,{display:"inline",children:e.text.substring(3)})]})}))})]})}function bn(e){var t=e.order,n=e.statementText,a=cn();return Object(T.jsxs)(_t.a,{border:0,className:a.question,children:[Object(T.jsx)(F.a,{display:"inline",style:{marginRight:"25px",fontWeight:"bold"},children:t}),Object(T.jsx)(F.a,{display:"inline",children:n.replace("_","_".repeat(20))})]})}var On=y()((function(e){return{title:{marginBottom:e.spacing(4)},answer:{margin:e.spacing(1)}}}));function xn(e){var t=On();return Object(T.jsx)(r.a.Fragment,{children:e.questionGroups.map((function(n){return Object(T.jsxs)(_t.a,{border:0,children:[Object(T.jsx)("div",{className:t.title,children:Object(T.jsx)($,{value:"Group ".concat(n.order),fontSize:"16px"})}),Object(T.jsx)(mn,{questions:n.questions,answers:e.answers,onAnswer:e.onAnswer})]})}))})}function mn(e){var t=On();return Object(T.jsx)(_t.a,{border:0,className:t.answer,children:e.questions.map((function(t){return Object(T.jsx)(pn,{type:t.type,id:t.id,order:t.order,answers:t.answers,onAnswer:e.onAnswer})}))})}function pn(e){var t=Ye()(),n=Object(a.useState)({questionId:parseInt(e.id,10),answerString:""}),s=Object(i.a)(n,2),c=s[0],o=s[1],l=function(t){o({questionId:parseInt(e.id,10),answerString:t.target.value})};return Object(a.useEffect)((function(){e.onAnswer(c)}),[c.answerString]),Object(T.jsx)(r.a.Fragment,{children:"TF"===e.type.toUpperCase()?Object(T.jsx)(N.a,{select:!0,fullWidth:!0,size:"small",variant:"outlined",id:e.order,label:"Question ".concat(e.order),value:c.answerString,style:{marginBottom:t.spacing(4)},onChange:function(e){return l(e)},children:e.answers.map((function(e){return Object(T.jsx)(W.a,{value:e.text,children:e.text},e.id)}))}):"FITB"===e.type.toUpperCase()?Object(T.jsx)(N.a,{fullWidth:!0,size:"small",variant:"outlined",id:e.order,label:"Question ".concat(e.order),value:c.answerString,style:{marginBottom:t.spacing(4)},onChange:function(e){return l(e)}}):Object(T.jsx)(N.a,{select:!0,fullWidth:!0,size:"small",variant:"outlined",id:e.order,label:"Question ".concat(e.order),value:c.answerString,style:{marginBottom:t.spacing(4)},onChange:function(e){return l(e)},children:e.answers.map((function(e){return Object(T.jsx)(W.a,{value:e.text,children:e.text.substring(0,1)},e.id)}))})})}var hn=n(341),fn=n(342),gn=n(343),vn=n(344),yn=n(206),wn=n.n(yn),Cn=y()((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"auto"},card:{borderRadius:"50px"},timer:{top:"auto",bottom:0},zoom:{position:"fixed",bottom:e.spacing(2),right:e.spacing(2)},alert:{fontWeight:"bold",backgroundColor:"white"}}}));function In(e){var t=Cn();return e.sections.map((function(n){return Object(T.jsxs)(x.a,{container:!0,spacing:3,children:[Object(T.jsx)(x.a,{item:!0,xs:12,children:Object(T.jsx)(g.a,{variant:"outlined",className:t.paper,children:Object(T.jsx)(on,{section:n.order,passage:n.statementText})})}),Object(T.jsx)(x.a,{item:!0,xs:9,children:Object(T.jsx)(g.a,{variant:"outlined",className:t.paper,children:Object(T.jsx)(ln,{questionGroups:n.questionGroups})})}),Object(T.jsx)(x.a,{item:!0,xs:3,children:Object(T.jsx)(g.a,{variant:"outlined",className:t.paper,children:Object(T.jsx)(xn,{questionGroups:n.questionGroups,answers:e.answers,onAnswer:e.onAnswer})})})]})}))}function Tn(e){var t=Cn(),n=Object(a.useState)(0),s=Object(i.a)(n,2),c=s[0],o=s[1],l=Object(a.useState)(null),j=Object(i.a)(l,2),u=j[0],d=j[1];return Object(a.useEffect)((function(){var t=setInterval((function(){o((function(n){100===n&&clearInterval(t);var a=100/(60*e.minutes);return Math.min(n+a,100)}))}),1e3)}),[]),Object(a.useEffect)((function(){c>=100?(d("".concat(e.reviewMinutes," minutes to review your result.")),setTimeout((function(){e.onTimeOut()}),60*e.reviewMinutes*1e3)):d(c>=83&&c<=85?"Only 10 minutes left.":c>=66&&c<=68?"20 minutes left. You should do section 3 now!":c>=33&&c<=35?"20 minutes passed!":null)}),[c]),Object(T.jsxs)(r.a.Fragment,{children:[Object(T.jsx)(ze.a,{position:"fixed",className:t.timer,children:Object(T.jsx)("div",{style:{width:"100%"},children:Object(T.jsx)(hn.a,{variant:"determinate",value:c})})}),Object(T.jsx)(Sn,{alert:u})]})}function Sn(e){var t=Cn();return Object(T.jsx)(_t.a,{className:t.zoom,position:"fixed",zIndex:"tooltip",children:Object(T.jsx)(fn.a,{in:e.alert,children:Object(T.jsx)(gn.a,{variant:"outlined",classes:{root:t.card},children:Object(T.jsx)(It.a,{className:t.alert,children:Object(T.jsxs)(St.a,{children:[Object(T.jsx)(vn.a,{children:Object(T.jsx)(wn.a,{})}),Object(T.jsx)(kt.a,{primary:e.alert})]})})})})})}var kn=y()((function(e){return{testContainer:{paddingTop:e.spacing(4),paddingLeft:e.spacing(8),paddingBottom:e.spacing(4),paddingRight:e.spacing(8)},commentContainer:{paddingTop:e.spacing(4),paddingBottom:e.spacing(8)},cardHeader:{paddingBottom:e.spacing(1)},cardContent:{paddingTop:e.spacing(0)},noticed:{marginTop:e.spacing(20),display:"flex",flexDirection:"column",alignItems:"center"}}}));function qn(){var e=Object(j.h)().id,t=Object(a.useContext)(we),n=Object(i.a)(t,1)[0],s=Object(Z.useQuery)(bt,{variables:{userId:parseInt(n.user.id,10),testId:parseInt(e,10)}}),c=s.loading,o=s.data,l=Object(a.useState)(!1),u=Object(i.a)(l,2),d=u[0],b=u[1],O=Object(Z.useMutation)(Oe),x=Object(i.a)(O,1)[0],m=Object(a.useState)(!1),p=Object(i.a)(m,2),h=p[0],f=p[1];return o||h?Object(T.jsx)(j.a,{to:"/view/".concat(e)}):Object(T.jsx)(r.a.Fragment,{children:c?Object(T.jsx)(ye,{open:c}):d?Object(T.jsx)(Wn,{onDone:function(){f(!0)}}):Object(T.jsx)(Nn,{onClick:function(){return b(!0),void x({variables:{testId:parseInt(e,10),userId:parseInt(n.user.id,10)}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}})})}function Nn(e){var t=kn();return Object(T.jsxs)(Te.a,{maxWidth:"xs",className:t.noticed,children:[Object(T.jsx)($,{value:"Before you do your test...",fontSize:"18px"}),Object(T.jsxs)(x.a,{container:!0,children:[Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:[{id:"1",text:"Test will be account for 60 minutes. After 60 minutes, current answer will be submitted and result will be counted towards your rating."},{id:"2",text:"Please do not reload your browser while you do your test; or else, your answer will be deleted."},{id:"3",text:"You will be given additional 5 minutes to review your result after 60 minutes ended. Please submit your result in time."}].map((function(e){return Object(T.jsxs)(_t.a,{border:0,style:{marginTop:"18px"},children:[Object(T.jsx)(F.a,{display:"inline",style:{marginLeft:"10px",marginRight:"25px",fontWeight:"bold"},children:e.id}),Object(T.jsx)(F.a,{display:"inline",children:e.text})]})}))}),Object(T.jsx)(x.a,{item:!0,xs:12,sm:12,children:Object(T.jsx)(S,{value:"Do test",onClick:function(){return e.onClick()}})})]})]})}function Wn(e){var t=Object(j.h)().id,n=kn(),s=Object(a.useContext)(we),c=Object(i.a)(s,1)[0],o=Object(a.useState)([]),l=Object(i.a)(o,2),u=l[0],d=l[1],m=Object(Z.useQuery)(dt,{variables:{id:parseInt(t,10)}}),p=Object(Z.useMutation)(be,{refetchQueries:[{query:ut,variables:{id:parseInt(c.user.id,10)}},{query:jt}]}),h=Object(i.a)(p,2),f=h[0],g=h[1].loading,v=function(){console.log(u),f({variables:{testSubmission:{testId:parseInt(t,10),userId:parseInt(c.user.id,10),answers:u}},errorPolicy:"none"}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),e.onDone()};return Object(T.jsxs)(r.a.Fragment,{children:[g&&Object(T.jsx)(ye,{open:g}),m.loading&&Object(T.jsx)(ye,{open:m.loading}),!m.loading&&Object(T.jsx)(Tn,{minutes:5,reviewMinutes:1,onTimeOut:v}),m.data&&Object(T.jsx)(x.a,{container:!0,direction:"row",justify:"flex-start",children:Object(T.jsxs)(Te.a,{className:n.testContainer,children:["reading"===m.data.getTestById.type.toLowerCase()?Object(T.jsx)(In,{sections:m.data.getTestById.sections,answers:u,onAnswer:function(){var e=Object(O.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==(n=u.findIndex((function(e){return e.questionId===t.questionId})))){e.next=6;break}return e.next=4,d([].concat(Object(sn.a)(u),[{questionId:t.questionId,answerString:t.answerString}]));case 4:e.next=10;break;case 6:return(a=u)[n].answerString=t.answerString,e.next=10,d(a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}):Object(T.jsx)("div",{children:"This is not developed yet."}),Object(T.jsx)(x.a,{container:!0,spacing:2,direction:"row",justify:"space-evenly",children:Object(T.jsx)(x.a,{item:!0,xs:4,children:Object(T.jsx)(S,{value:"Submit",onClick:function(){return v()}})})})]})})]})}var zn=y()((function(e){return{root:{display:"flex"},content:{flexGrow:1,overflow:"auto"},appBarSpacer:e.mixins.toolbar}}));function An(){var e=zn(),t=Object(j.g)(),n=Object(Z.useMutation)(re),a=Object(i.a)(n,1)[0],r=[Object(T.jsx)(W.a,{onClick:function(){return t.push("/tests")},children:"Home"}),Object(T.jsx)(W.a,{onClick:function(){return s()},children:"Sign Out"})],s=function(){a().then().catch(),t.push("/")};return Object(T.jsx)(Dt,{children:Object(T.jsxs)("div",{className:e.root,children:[Object(T.jsx)($e,{options:r}),Object(T.jsxs)("div",{className:e.content,children:[Object(T.jsx)("div",{className:e.appBarSpacer}),Object(T.jsx)(l.a,{basename:"/qnc-ielts-practice/tests",children:Object(T.jsxs)(j.d,{children:[Object(T.jsx)(j.b,{exact:!0,path:"/",component:Ct}),Object(T.jsx)(j.b,{exact:!0,path:"/view/:id",children:Object(T.jsx)(Lt,{})}),Object(T.jsx)(j.b,{exact:!0,path:"/do/:id",children:Object(T.jsx)(qn,{})}),Object(T.jsx)(j.b,{exact:!0,path:"/add",component:Vt})]})})]})]})})}var Fn,Bn=n(323),$n=n(153),Pn=n.n($n),Mn=n(207),Ln=n(208),Qn=Pn()({palette:{primary:{light:"#8c332d",main:"#590004",dark:"#350000",contrastText:"#ffffff"},secondary:{light:"#ffec4e",main:"#fcba04",dark:"#c48a00",contrastText:"#000000"},chip:{listening:"#ff7077",reading:"#fede86"},table:{head:"#ffffff",text:"#000000",even:"#ffffff",odd:"#f5f5f5"},action:{hover:"#cccccc"}}}),Rn=Object(Ln.a)((function(e){var t=e.graphQLErrors,n=e.networkError;t&&console.log("graphQLErrors",t),n&&console.log("networkError",n)})),Dn=Object(Z.createHttpLink)({uri:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_URL||"https://qnc-ielts-practice.herokuapp.com/graphql",credentials:"include"}),En=Object(Mn.a)((function(e,t){var n=t.headers;return{headers:Object(o.a)(Object(o.a)({},n),{},{authorization:Fn?"Bearer ".concat(Fn):""})}})),Gn=new Z.ApolloClient({link:En.concat(Z.ApolloLink.from([Rn,Dn])),cache:new Z.InMemoryCache});function Jn(){var e=Object(a.useState)({status:!1,token:null,user:{id:null,username:null,role:{name:null}}}),t=Object(i.a)(e,2),n=t[0],r=t[1];return Fn=n.token,Object(T.jsx)(Bn.a,{theme:Qn,children:Object(T.jsx)(Z.ApolloProvider,{client:Gn,children:Object(T.jsx)(we.Provider,{value:[n,r],children:Object(T.jsx)(l.a,{basename:"/qnc-ielts-practice",children:Object(T.jsxs)(j.d,{children:[Object(T.jsx)(j.b,{exact:!0,path:"/",component:Ie}),Object(T.jsx)(j.b,{exact:!0,path:"/create-account",component:ke}),Object(T.jsx)(j.b,{exact:!0,path:"/forgot-password",component:Ne}),Object(T.jsx)(j.b,{path:"/tests",component:An})]})})})})})}c.a.render(Object(T.jsx)(Jn,{}),document.getElementById("root"))}},[[272,1,2]]]);
//# sourceMappingURL=main.f2944b0e.chunk.js.map